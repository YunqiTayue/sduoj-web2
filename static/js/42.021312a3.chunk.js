(this.webpackJsonpsduoj=this.webpackJsonpsduoj||[]).push([[42],{1004:function(e,t,a){"use strict";var n=a(975),r=a(299),o=a(965),i=a(60),c=a(1085),s=a(974),l=a(0),d=a(87),u=a(66),b=a(298),m=a(40),j=a(302),p=a(67),h=a(292),g=a(5);t.a=Object(u.b)((e=>{var t;const a=e.UserReducer,n=e.TableReduce;return{roles:null===(t=a.userInfo)||void 0===t?void 0:t.roles,tableData:{...n.tableData}}}),(e=>({setTableInfo:(t,a)=>e({type:"setTableInfo",name:t,data:a}),setDataSource:(t,a)=>e({type:"setDataSource",data:t,name:a,add:!1})})))(Object(b.a)()(Object(m.e)((e=>{var t,a;const[u,b]=Object(l.useState)(0),[m,O]=Object(l.useState)(),[v,f]=Object(l.useState)(!0),[x,y]=Object(l.useState)(1),[S,w]=Object(l.useState)(Object(p.a)(e.defaultPageSize,d.h)),[C,I]=Object(l.useState)(),[N,F]=Object(l.useState)(0),z=t=>{O(t),void 0!==e.setDataSource&&void 0!==e.name&&e.setDataSource(t,e.name)},T=(t,a,n,r)=>{var o,i,c,s,l;const d=null===(o=e.tableData[e.name])||void 0===o?void 0:o.tableInfo;var u,m,j,p;void 0!==d&&(void 0===r&&void 0!==d.moreProps&&P.setFieldsValue(d.moreProps),t=null!==(u=t)&&void 0!==u?u:d.pageNow,a=null!==(m=a)&&void 0!==m?m:d.pageSize,n=null!==(j=n)&&void 0!==j?j:d.searchKey,r=null!==(p=r)&&void 0!==p?p:d.moreProps);let h=null!==(i=t)&&void 0!==i?i:x,g=null!==(c=a)&&void 0!==c?c:S,O=null!==(s=n)&&void 0!==s?s:C,v=null!==(l=r)&&void 0!==l?l:P.getFieldsValue();y(h),w(g),I(O),f(!0),e.API({pageNow:h,pageSize:g,searchKey:O,...v}).then((t=>{null===t.rows&&(t.rows=[]),void 0!==e.APIRowsTransForm?z(e.APIRowsTransForm(t.rows)):z(t.rows),void 0!==t.totalNum&&"0"!==t.totalNum?(b(t.totalNum),e.name&&e.setTableInfo(e.name,{total:t.totalNum,pageNow:h,pageSize:g,searchKey:O,moreProps:v})):(b(g*t.totalPage),e.name&&e.setTableInfo(e.name,{total:g*t.totalPage,pageNow:h,pageSize:g,searchKey:O,moreProps:v})),f(!1)}))};Object(l.useEffect)((()=>{P.setFieldsValue(e.initRequestProps),T()}),[e.name]);const[P]=Object(h.a)(),k=()=>{const e=P.getFieldsValue();"{}"!==JSON.stringify(e)&&T(1,S,void 0,e)},E=()=>{var t;const a=P.getFieldsValue();P.resetFields();const n=null===(t=e.tableData[e.name])||void 0===t?void 0:t.tableInfo;e.name&&e.setTableInfo(e.name,{total:n.total,pageNow:n.pageNow,pageSize:n.pageSize,searchKey:n.searchKey,moreProps:void 0});const r=P.getFieldsValue();JSON.stringify(a)!==JSON.stringify(r)&&T(1,S,void 0,void 0)};return Object(l.useEffect)((()=>{var t;const a=null===(t=e.tableData[e.name])||void 0===t?void 0:t.tableVersion;if(void 0!==a&&N!==a)if(a<0){var n;F(-a),O(null===(n=e.tableData[e.name])||void 0===n?void 0:n.dataSource)}else{F(a);const e=P.getFieldsValue();T(x,S,C,e)}}),[e.tableData,N]),Object(g.jsxs)(g.Fragment,{children:[e.useList&&Object(g.jsx)(n.a,{title:e.title,bordered:!0,size:"default",className:null!==(t=e.cardProps)&&void 0!==t?t:"zeroBodyPaddingLeft",extra:(!0===e.search||void 0!==e.getForm)&&Object(g.jsxs)(g.Fragment,{children:[!0===e.search&&Object(g.jsx)(j.a,{placeholder:e.t("searchUser"),onSearch:e=>{I(e),y(1);const t=P.getFieldsValue();T(1,S,e,t)},enterButton:!0,style:{width:300}},"search"),void 0!==e.getForm&&Object(g.jsxs)(r.a,{form:P,children:[e.getForm(k),e.useFormBtn&&Object(g.jsxs)(o.b,{style:{marginLeft:"30px"},size:20,children:[Object(g.jsx)(i.a,{type:"primary",onClick:k,children:"\u7b5b\u9009"}),Object(g.jsx)(i.a,{htmlType:"button",onClick:E,children:"\u91cd\u7f6e"})]})]})]}),children:Object(g.jsx)(c.b,{grid:e.grid,itemLayout:"vertical",loading:v,size:e.size,dataSource:m,renderItem:e.renderItem,pagination:{onChange:(e,t)=>{T(e,t)},current:x,pageSize:S,total:u,size:"small",hideOnSinglePage:!0,showQuickJumper:!0,showLessItems:!0,showSizeChanger:Object(p.a)(e.showSizeChanger,!0),pageSizeOptions:["5","15","20","50","80"]}})}),!e.useList&&Object(g.jsx)(n.a,{bordered:!1,size:"small",extra:(!0===e.search||void 0!==e.getForm)&&Object(g.jsxs)(g.Fragment,{children:[!0===e.search&&Object(g.jsx)(j.a,{placeholder:"\u641c\u7d22",onSearch:e=>{I(e),y(1),T(1,S,e)},enterButton:!0,style:{width:300}},"search"),void 0!==e.getForm&&Object(g.jsxs)(r.a,{form:P,children:[e.getForm(k),Object(g.jsxs)(o.b,{style:{marginLeft:"30px"},size:20,children:[Object(g.jsx)(i.a,{type:"primary",onClick:k,children:e.t("filtering")}),Object(g.jsx)(i.a,{htmlType:"button",onClick:E,children:e.t("Reset")})]})]})]}),children:Object(g.jsx)(s.a,{rowKey:e.rowKey,loading:v,size:e.size,columns:e.columns,rowSelection:e.rowSelection,dataSource:m,pagination:null!==(a=e.pagination)&&void 0!==a?a:{onChange:(e,t)=>{T(e,t)},current:x,pageSize:S,total:u,hideOnSinglePage:!1,showQuickJumper:!0,showLessItems:!0,showSizeChanger:Object(p.a)(e.showSizeChanger,!0),pageSizeOptions:["5","15","20","50","80"]}})})]})}))))},1018:function(e,t,a){"use strict";var n=a(0),r=a(66),o=a(298),i=a(40),c=a(97),s=a(60),l=a(968),d=a(299),u=a(409),b=a(411),m=a(67),j=a(292),p=a(1429),h=a(5);t.a=Object(r.b)((()=>({})),(e=>({addTableVersion:t=>e({type:"addTableVersion",name:t}),addManageInitData:(t,a)=>e({type:"addManageInitData",key:t,data:a})})))(Object(o.a)()(Object(i.e)((e=>{var t;const[a]=Object(j.a)(),r=Object(n.useRef)([]),[o,i]=Object(n.useState)(!1),[g,O]=Object(n.useState)(),[v,f]=Object(n.useState)(0),[x,y]=Object(n.useState)(!1);Object(n.useEffect)((()=>{setTimeout((()=>{!Object(m.c)(r.current)&&r.current.forEach((e=>{var t;null===(t=e.current)||void 0===t||t.setFieldsValue(g)})),a&&a.setFieldsValue(g)}),100),o||(f(0),r.current.forEach((e=>{var t;null===(t=e.current)||void 0===t||t.resetFields()})),e.formName&&e.addManageInitData(e.formName,void 0))}),[o,g]),Object(n.useEffect)((()=>{e.formName&&e.addManageInitData(e.formName,g)}),[g]);const S=t=>{const n=t=>{y(!0),e.updateAppendProps&&Object.assign(t,e.updateAppendProps),e.dataSubmitter(t).then((t=>{e.TableName&&e.addTableVersion(e.TableName),e.afterSubmit&&e.afterSubmit(t),e.onClose&&e.onClose(),i(!1),c.b.success("\u6210\u529f")})).finally((()=>{y(!1)}))};1===e.subForm.length?a.validateFields().then((e=>{n(e)})).catch((()=>{c.b.error("\u8868\u5355\u4e0d\u5b8c\u6574")})):n(t)};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(s.a,{...e.btnProps,type:Object(m.a)(e.btnType,{create:"primary",update:"link",fork:"link",batchUpdate:"primary"}[e.type]),onClick:()=>{if("update"===e.type||"fork"===e.type)if(void 0===e.initData){const t=c.b.loading({content:"\u52a0\u8f7d\u4e2d",duration:0});if(void 0===e.dataLoader)return t(),void c.b.error("\u672a\u5b9a\u4e49\u6570\u636e\u52a0\u8f7d\u5668");e.dataLoader&&e.dataLoader().then((e=>{O(e),t(),i(!0)})).catch((()=>{t()}))}else O(e.initData),i(!0);else"create"===e.type?(void 0!==e.initData&&O(e.initData),i(!0)):i(!0)},style:"fork"===e.type||"update"===e.type||"link"===e.btnType?{paddingLeft:5,paddingRight:5}:void 0,children:[(()=>{if(!1!==e.btnIcon){if("create"===e.type)return Object(h.jsx)(u.a,{});if("batchUpdate"===e.type)return Object(h.jsx)(b.a,{})}})(),(()=>{if(void 0!==e.btnName)return e.btnName;switch(e.type){case"create":return e.t("create");case"update":return e.t("Edit");case"fork":return"\u514b\u9686";default:return"\u6279\u91cf\u4fee\u6539"}})()]}),1===e.subForm.length&&Object(h.jsx)(l.a,{width:e.width,style:{minWidth:e.width},destroyOnClose:!0,title:e.title,className:e.className,visible:o,maskClosable:!1,onCancel:()=>{e.onClose&&e.onClose(),i(!1)},footer:[Object(h.jsx)(s.a,{type:"primary",onClick:S,loading:x,children:e.t("Submit")},"submit")],children:Object(h.jsx)(d.a,{form:a,layout:null!==(t=e.layout)&&void 0!==t?t:"vertical",initialValues:e.initData,scrollToFirstError:!0,preserve:!1,children:e.subForm[0].component})}),1!==e.subForm.length&&Object(h.jsx)(p.b,{current:v,onCurrentChange:e=>{f(e)},formMapRef:r,onFinish:async e=>{S(e)},submitter:{submitButtonProps:{loading:x}},stepsFormRender:(t,a)=>{var n;return Object(h.jsx)(l.a,{destroyOnClose:!0,title:e.title,className:e.className,visible:o,maskClosable:!1,width:null!==(n=e.width)&&void 0!==n?n:1200,style:{minWidth:e.width},onCancel:()=>{e.onClose&&e.onClose(),i(!1)},footer:a,children:t})},children:e.subForm.map(((t,a)=>{var n;return Object(h.jsx)(p.b.StepForm,{layout:null!==(n=e.layout)&&void 0!==n?n:"vertical",name:"step"+a,title:t.label,onFinish:async()=>!0,children:t.component})}))})]})}))))},1022:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return c}));var n=a(100),r=a(1041),o=a.n(r);const i=(e,t)=>{let a=new FormData,r=0,i=[],c=[];e.forEach((e=>{c.push(e.arrayBuffer().then((c=>{let s=o()(c);return i.push(n.a.getFileByMD5({md5:s}).then((n=>null!==n?(t(n),Promise.resolve()):(a.append("files",e),r+=1,Promise.resolve())))),Promise.resolve()})))})),Promise.all(c).then((()=>{Promise.all(i).then((()=>{0!==r&&n.a.uploadFile(a).then((e=>{e.map((e=>{t(e)}))}))}))}))},c=(e,t)=>{let a=new FormData;a.append("file",e),n.a.uploadSingleFile(a).then((e=>{t(e)}))}},1053:function(e,t,a){"use strict";var n=a(0),r=a(1027),o=a.n(r),i=a(1022),c=a(97),s=a(60),l=a(408),d=a(965),u=a(1067),b=a.n(u),m=a(66),j=a(401),p=a(298),h=a(40),g=a(141),O=a(67),v=a(5);const f=e=>{const t=Date.now().toString(),{t:a}=Object(j.a)();return new b.a("."+e.btnText+t,{text:t=>e.text}).on("success",(function(e){c.b.success(a("ReplicationSuccess"))})),Object(v.jsx)(s.a,{className:e.btnText+t,size:"small",children:e.btnText})},x="https://oj.qd.sdu.edu.cn";t.a=Object(m.b)((e=>({langCode:e.ConfigReducer.langCode})),(e=>({})))(Object(p.a)()(Object(h.e)((e=>{var t;const[a,r]=Object(n.useState)(void 0),[s,u]=Object(n.useState)(!1);return Object(n.useEffect)((()=>{Object(O.c)(e.langCode)||(()=>{var t;const a=new o.a(null!==(t=e.id)&&void 0!==t?t:"vditor",{height:void 0===e.height?800:e.height,mode:"ir",placeholder:"\u652f\u6301 Markdown\uff0c\u652f\u6301 KaTex \u516c\u5f0f\n\u8868\u683c\u63d2\u5165\u4e00\u884c\uff1aCtrl+'+' \n\u8868\u683c\u63d2\u5165\u4e00\u5217\uff1aCtrl+Shift+'+'",lang:e.langCode,cdn:x+"/vditor",outline:{enable:!1,position:"left"},hint:{emojiPath:x+"/vditor/dist/images/emoji"},preview:{delay:500,hljs:{lineNumber:!1},markdown:{toc:!0,mark:!0,footnotes:!0,autoSpace:!0},math:{inlineDigit:!0,engine:"KaTeX"}},toolbar:["emoji","headings","bold","italic","strike","link","|","list","ordered-list","check","outdent","indent","|","quote","line","code","inline-code","insert-before","insert-after","|","upload","table","|","undo","redo","|","outline","fullscreen","edit-mode",{name:"more",toolbar:["code-theme","content-theme","export","help"]},"|",{hotkey:"\u2318-S",name:"save",tipPosition:"s",tip:"\u4fdd\u5b58",className:"right",icon:'<img style="height: 16px" src=\'https://img.58cdn.com.cn/escstatic/docs/imgUpload/idocs/save.svg\' alt="save"/>',click(){e.onChange&&e.onChange(a.getValue())}}],after(){a.setValue(void 0===e.value?"":e.value),u(!0)},blur(){e.onChange&&e.onChange(a.getValue())},upload:{accept:"*/*",multiple:!1,filename:e=>e.replaceAll(/[^(a-zA-Z0-9\u4e00-\u9fa5.)]/g,"").replaceAll(/[?\\/:|<>*\[\]()$%{}@~]/g,"").replaceAll("/\\s/g",""),handler(e){if(e[0].name.length>64)return c.b.error("\u6587\u4ef6\u540d\u5927\u4e8e 64 \u5b57\u7b26"),Promise.reject("\u6587\u4ef6\u540d\u5927\u4e8e 64 \u5b57\u7b26");Object(i.a)(e,(function(t){let n=e[0]&&e[0].name;n=n.replaceAll(/[^(a-zA-Z0-9\u4e00-\u9fa5.)]/g,"").replaceAll(/[?\\/:|<>*\[\]()$%{}@~]/g,"").replaceAll("/\\s/g","");const r=Object(g.a)().CLIENT_SERVER+"/api/filesys/download/"+t.id+"/"+n;let o=n.substr(n.lastIndexOf(".")+1).toUpperCase(),i="";-1!==["BMP","DIB","PCP","DIF","WMF","GIF","JPG","TIF","EPS","PSD","CDR","IFF","TGA","PCD","MPT","PNG"].indexOf(o)?a&&"wysiwyg"===a.vditor.currentMode?i+='\n <img src="'.concat(r,'" alt="').concat(n,'" style="zoom:100%;" />'):i+="\n ![".concat(n,"](").concat(r,")"):a&&"wysiwyg"===a.vditor.currentMode?i+='\n <a href="'.concat(r,'">').concat(n,"</a>"):i+="\n [".concat(n,"](").concat(r,")"),document.execCommand("insertHTML",!1,i),l.a.open({message:"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f",description:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("span",{children:["\u6587\u4ef6\u540d\uff1a",n]}),Object(v.jsx)("br",{}),Object(v.jsxs)(d.b,{children:["\u70b9\u51fb\u590d\u5236\uff1a",Object(v.jsx)(f,{text:r,btnText:"\u7eaf\u8def\u5f84"}),Object(v.jsx)(f,{text:"[".concat(n,"](").concat(r,")"),btnText:"MD\u94fe\u63a5"}),Object(v.jsx)(f,{text:"![".concat(n,"](").concat(r,")"),btnText:"MD\u56fe\u7247"})]}),Object(v.jsx)("br",{}),Object(v.jsxs)(d.b,{children:[Object(v.jsx)(f,{text:'<a href="'.concat(r,'">').concat(n,"</a>"),btnText:"HTML\u94fe\u63a5"}),Object(v.jsx)(f,{text:'<img src="'.concat(r,'" alt="').concat(n,'" style="zoom:100%;" />'),btnText:"HTML\u56fe\u7247"})]})]}),duration:null,type:"success"})}))}}});r(a)})()}),[e.langCode]),Object(n.useEffect)((()=>{var t;s&&void 0!==a&&a.getValue()!==e.value&&a.setValue(null!==(t=e.value)&&void 0!==t?t:"")}),[a,e.value,s]),Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{id:null!==(t=e.id)&&void 0!==t?t:"vditor",className:"vditor"})})}))))},1054:function(e,t,a){"use strict";var n=a(299),r=a(178),o=(a(0),a(298)),i=a(5);t.a=Object(o.a)()((e=>{var t,a;return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(n.a.Item,{label:null!==(t=e.label)&&void 0!==t?t:e.t("title"),name:null!==(a=e.name)&&void 0!==a?a:"title",required:!0,children:Object(i.jsx)(r.a,{})})})}))},1085:function(e,t,a){"use strict";a.d(t,"a",(function(){return I}));var n=a(16),r=a(3),o=a(4),i=a(10),c=a(15),s=a(2),l=a.n(s),d=a(0),u=a.n(d),b=a(36),m=a(184),j=a(962),p=a(138),h=a(306),g=a(241),O=a(112),v=a(177),f=a(23),x=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},y=function(e,t){var a=e.prefixCls,n=e.children,i=e.actions,c=e.extra,s=e.className,m=e.colStyle,j=x(e,["prefixCls","children","actions","extra","className","colStyle"]),p=Object(d.useContext)(I),h=p.grid,g=p.itemLayout,O=Object(d.useContext)(b.b).getPrefixCls,y=O("list",a),S=i&&i.length>0&&u.a.createElement("ul",{className:"".concat(y,"-item-action"),key:"actions"},i.map((function(e,t){return u.a.createElement("li",{key:"".concat(y,"-item-action-").concat(t)},e,t!==i.length-1&&u.a.createElement("em",{className:"".concat(y,"-item-action-split")}))}))),w=h?"div":"li",C=u.a.createElement(w,Object(r.a)({},j,h?{}:{ref:t},{className:l()("".concat(y,"-item"),Object(o.a)({},"".concat(y,"-item-no-flex"),!("vertical"===g?c:!function(){var e;return d.Children.forEach(n,(function(t){"string"===typeof t&&(e=!0)})),e&&d.Children.count(n)>1}())),s)}),"vertical"===g&&c?[u.a.createElement("div",{className:"".concat(y,"-item-main"),key:"content"},n,S),u.a.createElement("div",{className:"".concat(y,"-item-extra"),key:"extra"},c)]:[n,S,Object(f.a)(c,{key:"extra"})]);return h?u.a.createElement(v.a,{ref:t,flex:1,style:m},C):C},S=Object(d.forwardRef)(y);S.Meta=function(e){var t=e.prefixCls,a=e.className,n=e.avatar,o=e.title,i=e.description,c=x(e,["prefixCls","className","avatar","title","description"]),s=(0,Object(d.useContext)(b.b).getPrefixCls)("list",t),m=l()("".concat(s,"-item-meta"),a),j=u.a.createElement("div",{className:"".concat(s,"-item-meta-content")},o&&u.a.createElement("h4",{className:"".concat(s,"-item-meta-title")},o),i&&u.a.createElement("div",{className:"".concat(s,"-item-meta-description")},i));return u.a.createElement("div",Object(r.a)({},c,{className:m}),n&&u.a.createElement("div",{className:"".concat(s,"-item-meta-avatar")},n),(o||i)&&j)};var w=S,C=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},I=d.createContext({});I.Consumer;function N(e){var t,a=e.pagination,s=void 0!==a&&a,u=e.prefixCls,v=e.bordered,f=void 0!==v&&v,x=e.split,y=void 0===x||x,S=e.className,w=e.children,N=e.itemLayout,F=e.loadMore,z=e.grid,T=e.dataSource,P=void 0===T?[]:T,k=e.size,E=e.header,D=e.footer,L=e.loading,V=void 0!==L&&L,M=e.rowKey,A=e.renderItem,R=e.locale,G=C(e,["pagination","prefixCls","bordered","split","className","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),K=s&&"object"===Object(c.a)(s)?s:{},B=d.useState(K.defaultCurrent||1),J=Object(i.a)(B,2),U=J[0],q=J[1],H=d.useState(K.defaultPageSize||10),W=Object(i.a)(H,2),Q=W[0],Z=W[1],$=d.useContext(b.b),X=$.getPrefixCls,_=$.renderEmpty,Y=$.direction,ee={},te=function(e){return function(t,a){q(t),Z(a),s&&s[e]&&s[e](t,a)}},ae=te("onChange"),ne=te("onShowSizeChange"),re=X("list",u),oe=V;"boolean"===typeof oe&&(oe={spinning:oe});var ie=oe&&oe.spinning,ce="";switch(k){case"large":ce="lg";break;case"small":ce="sm"}var se=l()(re,(t={},Object(o.a)(t,"".concat(re,"-vertical"),"vertical"===N),Object(o.a)(t,"".concat(re,"-").concat(ce),ce),Object(o.a)(t,"".concat(re,"-split"),y),Object(o.a)(t,"".concat(re,"-bordered"),f),Object(o.a)(t,"".concat(re,"-loading"),ie),Object(o.a)(t,"".concat(re,"-grid"),!!z),Object(o.a)(t,"".concat(re,"-something-after-last-item"),!!(F||s||D)),Object(o.a)(t,"".concat(re,"-rtl"),"rtl"===Y),t),S),le=Object(r.a)(Object(r.a)(Object(r.a)({},{current:1,total:0}),{total:P.length,current:U,pageSize:Q}),s||{}),de=Math.ceil(le.total/le.pageSize);le.current>de&&(le.current=de);var ue=s?d.createElement("div",{className:"".concat(re,"-pagination")},d.createElement(h.a,Object(r.a)({},le,{onChange:ae,onShowSizeChange:ne}))):null,be=Object(n.a)(P);s&&P.length>(le.current-1)*le.pageSize&&(be=Object(n.a)(P).splice((le.current-1)*le.pageSize,le.pageSize));var me=Object.keys(z||{}).some((function(e){return["xs","sm","md","lg","xl","xxl"].includes(e)})),je=Object(p.a)(me),pe=d.useMemo((function(){for(var e=0;e<O.b.length;e+=1){var t=O.b[e];if(je[t])return t}}),[je]),he=d.useMemo((function(){if(z){var e=pe&&z[pe]?z[pe]:z.column;return e?{width:"".concat(100/e,"%"),maxWidth:"".concat(100/e,"%")}:void 0}}),[null===z||void 0===z?void 0:z.column,pe]),ge=ie&&d.createElement("div",{style:{minHeight:53}});if(be.length>0){var Oe=be.map((function(e,t){return function(e,t){return A?((a="function"===typeof M?M(e):M?e[M]:e.key)||(a="list-item-".concat(t)),ee[t]=a,A(e,t)):null;var a}(e,t)})),ve=d.Children.map(Oe,(function(e,t){return d.createElement("div",{key:ee[t],style:he},e)}));ge=z?d.createElement(j.a,{gutter:z.gutter},ve):d.createElement("ul",{className:"".concat(re,"-items")},Oe)}else w||ie||(ge=function(e,t){return d.createElement("div",{className:"".concat(e,"-empty-text")},R&&R.emptyText||t("List"))}(re,_||m.a));var fe=le.position||"bottom",xe=d.useMemo((function(){return{grid:z,itemLayout:N}}),[JSON.stringify(z),N]);return d.createElement(I.Provider,{value:xe},d.createElement("div",Object(r.a)({className:se},G),("top"===fe||"both"===fe)&&ue,E&&d.createElement("div",{className:"".concat(re,"-header")},E),d.createElement(g.a,Object(r.a)({},oe),ge,w),D&&d.createElement("div",{className:"".concat(re,"-footer")},D),F||("bottom"===fe||"both"===fe)&&ue))}N.Item=w;t.b=N},1089:function(e,t,a){"use strict";var n=a(1053),r=a(299),o=a(5);t.a=e=>Object(o.jsx)(r.a.Item,{label:e.label,name:e.name,children:Object(o.jsx)(n.a,{height:500,id:e.id})})},1096:function(e,t,a){"use strict";var n=a(299),r=a(178),o=(a(0),a(298)),i=a(5);t.a=Object(o.a)()((e=>{var t;return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(n.a.Item,{label:e.label,name:e.name,required:null===(t=e.required)||void 0===t||t,initialValue:e.initialValue,help:e.help,children:Object(i.jsx)(r.a,{addonAfter:e.addonAfter})})})}))},1316:function(e,t,a){"use strict";var n=a(1068),r=(a(0),a(298)),o=a(5);t.a=Object(r.a)()((e=>Object(o.jsx)(n.a,{title:"\u60a8\u786e\u5b9a\u8981\u8fdb\u884c\u64cd\u4f5c\u5417\uff1f",onConfirm:e.onConfirm,okText:e.t("yes"),cancelText:e.t("no"),disabled:e.disabled,children:e.content})))},1428:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(40),o=a(965),i=a(975),c=a(242),s=a(298),l=a(66),d=a(243),u=a(1004),b=a(1018),m=a(1054),j=a(1089),p=a(1096),h=a(299),g=a(193),O=a(5);var v=Object(s.a)()((e=>Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(m.a,{}),Object(O.jsx)(p.a,{name:"description",label:"\u63cf\u8ff0"}),Object(O.jsx)(h.a.Item,{name:"openness",label:"\u5f00\u653e\u6027",required:!0,children:Object(O.jsxs)(g.a.Group,{children:[Object(O.jsx)(g.a,{value:0,children:"\u516c\u5f00\uff1a\u4efb\u4f55\u4eba\u53ef\u4ee5\u52a0\u5165"}),Object(O.jsx)(g.a,{value:1,children:"\u7533\u8bf7\uff1a\u9700\u8981\u7ba1\u7406\u5458\u540c\u610f"}),Object(O.jsx)(g.a,{value:2,children:"\u79c1\u6709\uff1a\u4e0d\u5141\u8bb8\u52a0\u5165"})]})}),Object(O.jsx)(j.a,{label:"\u7ec4\u516c\u544a",name:"markdown"})]}))),f=a(178),x=a(97),y=a(60),S=a(968),w=a(974),C=a(1316);const{TextArea:I}=f.a;var N=Object(l.b)((e=>({})),(e=>({addTableVersion:t=>e({type:"addTableVersion",name:t})})))(Object(s.a)()(Object(r.e)((e=>{const[t,a]=Object(n.useState)(e.initData),[r,i]=Object(n.useState)([]),[s,l]=Object(n.useState)([]),[d,u]=Object(n.useState)(),[b,m]=Object(n.useState)(!1),j=Object(n.useRef)([]),[p,h]=Object(n.useState)(""),g=()=>{e.addTableVersion("GroupList")},v=()=>{c.a.getGroupDetail({groupId:e.groupId}).then((e=>{(e=>{a(e),l(e.filter((e=>2===e.status))),i(e.filter((e=>1===e.status)))})(e.members),u(e.owner)})).catch((()=>{console.log("error")}))},f=(n,r)=>{let o={groupId:e.groupId,userIds:n.map((e=>e.userId)),status:r};c.a.updateUserStatus(o).then((()=>{t.map((e=>{n.forEach((t=>{e.status=e.userId===t.userId?r:e.status}))}));let e=t.filter((e=>2===e.status||1===e.status));a(e),l(t.filter((e=>2===e.status))),i(t.filter((e=>1===e.status))),g()})).catch((()=>{console.log("error")}))};Object(n.useEffect)((()=>{void 0!==e.groupId&&b&&v()}),[e.groupId,b]);const N=[{title:"ID",dataIndex:"userId",width:70},{title:e.t("username"),dataIndex:"username",width:"auto"},{title:e.t("nickname"),dataIndex:"nickname",width:"auto"},{title:e.t("email"),dataIndex:"email",width:"auto"}],F=[...N,{title:e.t("operator"),width:"150px",render:(e,t)=>Object(O.jsxs)(o.b,{children:[Object(O.jsx)(C.a,{onConfirm:()=>f([t],2),content:Object(O.jsx)(y.a,{type:"link",size:"small",children:"\u540c\u610f"})}),Object(O.jsx)(C.a,{onConfirm:()=>f([t],3),content:Object(O.jsx)(y.a,{type:"link",size:"small",children:"\u62d2\u7edd"})})]})}],z=[...N,{title:e.t("operator"),width:"150px",render:(t,a)=>Object(O.jsx)(o.b,{children:d&&a.userId!==d.userId&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(C.a,{onConfirm:()=>(t=>{let a={groupId:e.groupId,userId:t.userId};const n=x.b.loading({content:"\u52a0\u8f7d\u4e2d",duration:0});c.a.updateGroup(a).then((()=>{n&&n(),u(t),g()})).catch((()=>{console.log("error")}))})(a),content:Object(O.jsx)(y.a,{type:"link",size:"small",children:"\u8f6c\u8ba9"})}),Object(O.jsx)(C.a,{onConfirm:()=>f([a],3),content:Object(O.jsx)(y.a,{type:"link",size:"small",children:"\u79fb\u9664"})})]})})}];return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(y.a,{type:e.btnType,size:"small",onClick:()=>{m(!0)},children:e.btnName}),Object(O.jsx)(S.a,{visible:b,destroyOnClose:!0,title:e.title,width:1200,onCancel:()=>{m(!1)},footer:!1,children:Object(O.jsxs)(o.b,{wrap:!0,children:[Object(O.jsxs)("div",{children:["\u7533\u8bf7\u7528\u6237(",void 0!==r?r.length:0,")"]}),Object(O.jsx)(C.a,{onConfirm:()=>f(r,2),content:Object(O.jsx)(y.a,{type:"primary",size:"small",children:"Accept All"}),disabled:0===r.length}),Object(O.jsx)(C.a,{onConfirm:()=>f(r,3),content:Object(O.jsx)(y.a,{type:"primary",danger:!0,size:"small",children:"Reject All"}),disabled:0===r.length}),Object(O.jsx)(w.a,{size:"small",columns:F,dataSource:r,pagination:!1,scroll:{y:200}}),Object(O.jsxs)("div",{children:["\u7528\u6237\u5217\u8868(",s.length,")"]}),Object(O.jsx)(I,{onChange:e=>{j.current=e.currentTarget.value.split(/,|\uff0c|\n| |\t/),h(e.currentTarget.value)},value:p,cols:180,rows:4,placeholder:"\u5c06\u7528\u6237\u540d\u7528\u7a7a\u683c' ',TAB'\\t',\u6362\u884c'\\n'\u6216\u9017\u53f7','\u5206\u9694"}),Object(O.jsx)(y.a,{type:"primary",size:"small",onClick:()=>{let t={groupId:e.groupId,usernames:j.current};c.a.addUsersToGroup(t).then((()=>{v(),g(),x.b.success("Success!"),h(""),j.current=[]})).catch((()=>{console.log("error in add user")}))},children:"\u6dfb\u52a0\u7528\u6237"}),Object(O.jsx)(w.a,{size:"small",columns:z,dataSource:s,pagination:!1,scroll:{y:240}})]})})]})}))));class F extends n.Component{render(){let e=[{title:"ID",dataIndex:"groupId",width:50,responsive:["lg","sm","xs"]},{title:this.props.t("title"),dataIndex:"title",width:"auto",responsive:["lg","sm","xs"]},{title:"\u63cf\u8ff0",dataIndex:"description",width:"auto",responsive:["lg","sm"]},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"gmtCreate",width:"170px",responsive:["lg"],render:e=>Object(d.e)(e)},{title:"\u7ec4\u957f",width:"auto",responsive:["lg"],render:(e,t)=>t.owner.username+"("+t.owner.nickname+")"},{title:"\u5f00\u653e\u6027",dataIndex:"openness",width:"auto",responsive:["lg"],render:e=>["\u516c\u5f00","\u7533\u8bf7","\u79c1\u6709"][e]},{title:"\u6210\u5458\u6570\u91cf",width:"auto",dataIndex:"memberNum",responsive:["lg"]},{title:this.props.t("operator"),width:"150px",render:(e,t)=>Object(O.jsxs)(o.b,{children:[Object(O.jsx)(b.a,{TableName:"GroupList",width:1200,title:t.title,type:"update",subForm:[{component:Object(O.jsx)(v,{})}],dataLoader:async()=>c.a.getGroupDetail({groupId:t.groupId}),updateAppendProps:{groupId:t.groupId},dataSubmitter:e=>c.a.updateGroup(e)}),Object(O.jsx)(N,{btnName:"\u6210\u5458\u7ba1\u7406",btnType:"link",width:1200,title:"Members in "+t.title+"(Group ID:"+t.groupId+")",initData:t,groupId:t.groupId})]})}];return Object(O.jsx)("div",{style:{marginTop:-20,overflow:"hidden"},children:Object(O.jsx)(i.a,{size:"small",bordered:!0,title:"\u7528\u6237\u7ec4\u5217\u8868",extra:Object(O.jsx)(o.b,{children:Object(O.jsx)(b.a,{TableName:"GroupList",width:1200,title:"\u65b0\u5efa\u7528\u6237\u7ec4",type:"create",subForm:[{component:Object(O.jsx)(v,{}),label:""}],dataSubmitter:e=>c.a.createGroup(e)})}),children:Object(O.jsx)(u.a,{name:"GroupList",columns:e,disableSelection:!0,API:c.a.getGroupList,size:"small",rowKey:"groupId"})})})}}t.default=Object(l.b)((e=>{var t;return{roles:null===(t=e.UserReducer.userInfo)||void 0===t?void 0:t.roles}}),(()=>({})))(Object(s.a)()(Object(r.e)(F)))}}]);
//# sourceMappingURL=42.021312a3.chunk.js.map