(this.webpackJsonpsduoj=this.webpackJsonpsduoj||[]).push([[8],{1004:function(e,t,a){"use strict";var n=a(975),i=a(299),l=a(965),s=a(60),r=a(1085),o=a(974),c=a(0),d=a(87),u=a(66),b=a(298),m=a(40),j=a(302),p=a(67),h=a(292),O=a(5);t.a=Object(u.b)((e=>{var t;const a=e.UserReducer,n=e.TableReduce;return{roles:null===(t=a.userInfo)||void 0===t?void 0:t.roles,tableData:{...n.tableData}}}),(e=>({setTableInfo:(t,a)=>e({type:"setTableInfo",name:t,data:a}),setDataSource:(t,a)=>e({type:"setDataSource",data:t,name:a,add:!1})})))(Object(b.a)()(Object(m.e)((e=>{var t,a;const[u,b]=Object(c.useState)(0),[m,g]=Object(c.useState)(),[v,x]=Object(c.useState)(!0),[f,y]=Object(c.useState)(1),[w,S]=Object(c.useState)(Object(p.a)(e.defaultPageSize,d.h)),[F,I]=Object(c.useState)(),[T,C]=Object(c.useState)(0),N=t=>{g(t),void 0!==e.setDataSource&&void 0!==e.name&&e.setDataSource(t,e.name)},z=(t,a,n,i)=>{var l,s,r,o,c;const d=null===(l=e.tableData[e.name])||void 0===l?void 0:l.tableInfo;var u,m,j,p;void 0!==d&&(void 0===i&&void 0!==d.moreProps&&P.setFieldsValue(d.moreProps),t=null!==(u=t)&&void 0!==u?u:d.pageNow,a=null!==(m=a)&&void 0!==m?m:d.pageSize,n=null!==(j=n)&&void 0!==j?j:d.searchKey,i=null!==(p=i)&&void 0!==p?p:d.moreProps);let h=null!==(s=t)&&void 0!==s?s:f,O=null!==(r=a)&&void 0!==r?r:w,g=null!==(o=n)&&void 0!==o?o:F,v=null!==(c=i)&&void 0!==c?c:P.getFieldsValue();y(h),S(O),I(g),x(!0),e.API({pageNow:h,pageSize:O,searchKey:g,...v}).then((t=>{null===t.rows&&(t.rows=[]),void 0!==e.APIRowsTransForm?N(e.APIRowsTransForm(t.rows)):N(t.rows),void 0!==t.totalNum&&"0"!==t.totalNum?(b(t.totalNum),e.name&&e.setTableInfo(e.name,{total:t.totalNum,pageNow:h,pageSize:O,searchKey:g,moreProps:v})):(b(O*t.totalPage),e.name&&e.setTableInfo(e.name,{total:O*t.totalPage,pageNow:h,pageSize:O,searchKey:g,moreProps:v})),x(!1)}))};Object(c.useEffect)((()=>{P.setFieldsValue(e.initRequestProps),z()}),[e.name]);const[P]=Object(h.a)(),k=()=>{const e=P.getFieldsValue();"{}"!==JSON.stringify(e)&&z(1,w,void 0,e)},D=()=>{var t;const a=P.getFieldsValue();P.resetFields();const n=null===(t=e.tableData[e.name])||void 0===t?void 0:t.tableInfo;e.name&&e.setTableInfo(e.name,{total:n.total,pageNow:n.pageNow,pageSize:n.pageSize,searchKey:n.searchKey,moreProps:void 0});const i=P.getFieldsValue();JSON.stringify(a)!==JSON.stringify(i)&&z(1,w,void 0,void 0)};return Object(c.useEffect)((()=>{var t;const a=null===(t=e.tableData[e.name])||void 0===t?void 0:t.tableVersion;if(void 0!==a&&T!==a)if(a<0){var n;C(-a),g(null===(n=e.tableData[e.name])||void 0===n?void 0:n.dataSource)}else{C(a);const e=P.getFieldsValue();z(f,w,F,e)}}),[e.tableData,T]),Object(O.jsxs)(O.Fragment,{children:[e.useList&&Object(O.jsx)(n.a,{title:e.title,bordered:!0,size:"default",className:null!==(t=e.cardProps)&&void 0!==t?t:"zeroBodyPaddingLeft",extra:(!0===e.search||void 0!==e.getForm)&&Object(O.jsxs)(O.Fragment,{children:[!0===e.search&&Object(O.jsx)(j.a,{placeholder:e.t("searchUser"),onSearch:e=>{I(e),y(1);const t=P.getFieldsValue();z(1,w,e,t)},enterButton:!0,style:{width:300}},"search"),void 0!==e.getForm&&Object(O.jsxs)(i.a,{form:P,children:[e.getForm(k),e.useFormBtn&&Object(O.jsxs)(l.b,{style:{marginLeft:"30px"},size:20,children:[Object(O.jsx)(s.a,{type:"primary",onClick:k,children:"\u7b5b\u9009"}),Object(O.jsx)(s.a,{htmlType:"button",onClick:D,children:"\u91cd\u7f6e"})]})]})]}),children:Object(O.jsx)(r.b,{grid:e.grid,itemLayout:"vertical",loading:v,size:e.size,dataSource:m,renderItem:e.renderItem,pagination:{onChange:(e,t)=>{z(e,t)},current:f,pageSize:w,total:u,size:"small",hideOnSinglePage:!0,showQuickJumper:!0,showLessItems:!0,showSizeChanger:Object(p.a)(e.showSizeChanger,!0),pageSizeOptions:["5","15","20","50","80"]}})}),!e.useList&&Object(O.jsx)(n.a,{bordered:!1,size:"small",extra:(!0===e.search||void 0!==e.getForm)&&Object(O.jsxs)(O.Fragment,{children:[!0===e.search&&Object(O.jsx)(j.a,{placeholder:"\u641c\u7d22",onSearch:e=>{I(e),y(1),z(1,w,e)},enterButton:!0,style:{width:300}},"search"),void 0!==e.getForm&&Object(O.jsxs)(i.a,{form:P,children:[e.getForm(k),Object(O.jsxs)(l.b,{style:{marginLeft:"30px"},size:20,children:[Object(O.jsx)(s.a,{type:"primary",onClick:k,children:e.t("filtering")}),Object(O.jsx)(s.a,{htmlType:"button",onClick:D,children:e.t("Reset")})]})]})]}),children:Object(O.jsx)(o.a,{rowKey:e.rowKey,loading:v,size:e.size,columns:e.columns,rowSelection:e.rowSelection,dataSource:m,pagination:null!==(a=e.pagination)&&void 0!==a?a:{onChange:(e,t)=>{z(e,t)},current:f,pageSize:w,total:u,hideOnSinglePage:!1,showQuickJumper:!0,showLessItems:!0,showSizeChanger:Object(p.a)(e.showSizeChanger,!0),pageSizeOptions:["5","15","20","50","80"]}})})]})}))))},1018:function(e,t,a){"use strict";var n=a(0),i=a(66),l=a(298),s=a(40),r=a(97),o=a(60),c=a(968),d=a(299),u=a(409),b=a(411),m=a(67),j=a(292),p=a(1429),h=a(5);t.a=Object(i.b)((()=>({})),(e=>({addTableVersion:t=>e({type:"addTableVersion",name:t}),addManageInitData:(t,a)=>e({type:"addManageInitData",key:t,data:a})})))(Object(l.a)()(Object(s.e)((e=>{var t;const[a]=Object(j.a)(),i=Object(n.useRef)([]),[l,s]=Object(n.useState)(!1),[O,g]=Object(n.useState)(),[v,x]=Object(n.useState)(0),[f,y]=Object(n.useState)(!1);Object(n.useEffect)((()=>{setTimeout((()=>{!Object(m.c)(i.current)&&i.current.forEach((e=>{var t;null===(t=e.current)||void 0===t||t.setFieldsValue(O)})),a&&a.setFieldsValue(O)}),100),l||(x(0),i.current.forEach((e=>{var t;null===(t=e.current)||void 0===t||t.resetFields()})),e.formName&&e.addManageInitData(e.formName,void 0))}),[l,O]),Object(n.useEffect)((()=>{e.formName&&e.addManageInitData(e.formName,O)}),[O]);const w=t=>{const n=t=>{y(!0),e.updateAppendProps&&Object.assign(t,e.updateAppendProps),e.dataSubmitter(t).then((t=>{e.TableName&&e.addTableVersion(e.TableName),e.afterSubmit&&e.afterSubmit(t),e.onClose&&e.onClose(),s(!1),r.b.success("\u6210\u529f")})).finally((()=>{y(!1)}))};1===e.subForm.length?a.validateFields().then((e=>{n(e)})).catch((()=>{r.b.error("\u8868\u5355\u4e0d\u5b8c\u6574")})):n(t)};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(o.a,{...e.btnProps,type:Object(m.a)(e.btnType,{create:"primary",update:"link",fork:"link",batchUpdate:"primary"}[e.type]),onClick:()=>{if("update"===e.type||"fork"===e.type)if(void 0===e.initData){const t=r.b.loading({content:"\u52a0\u8f7d\u4e2d",duration:0});if(void 0===e.dataLoader)return t(),void r.b.error("\u672a\u5b9a\u4e49\u6570\u636e\u52a0\u8f7d\u5668");e.dataLoader&&e.dataLoader().then((e=>{g(e),t(),s(!0)})).catch((()=>{t()}))}else g(e.initData),s(!0);else"create"===e.type?(void 0!==e.initData&&g(e.initData),s(!0)):s(!0)},style:"fork"===e.type||"update"===e.type||"link"===e.btnType?{paddingLeft:5,paddingRight:5}:void 0,children:[(()=>{if(!1!==e.btnIcon){if("create"===e.type)return Object(h.jsx)(u.a,{});if("batchUpdate"===e.type)return Object(h.jsx)(b.a,{})}})(),(()=>{if(void 0!==e.btnName)return e.btnName;switch(e.type){case"create":return e.t("create");case"update":return e.t("Edit");case"fork":return"\u514b\u9686";default:return"\u6279\u91cf\u4fee\u6539"}})()]}),1===e.subForm.length&&Object(h.jsx)(c.a,{width:e.width,style:{minWidth:e.width},destroyOnClose:!0,title:e.title,className:e.className,visible:l,maskClosable:!1,onCancel:()=>{e.onClose&&e.onClose(),s(!1)},footer:[Object(h.jsx)(o.a,{type:"primary",onClick:w,loading:f,children:e.t("Submit")},"submit")],children:Object(h.jsx)(d.a,{form:a,layout:null!==(t=e.layout)&&void 0!==t?t:"vertical",initialValues:e.initData,scrollToFirstError:!0,preserve:!1,children:e.subForm[0].component})}),1!==e.subForm.length&&Object(h.jsx)(p.b,{current:v,onCurrentChange:e=>{x(e)},formMapRef:i,onFinish:async e=>{w(e)},submitter:{submitButtonProps:{loading:f}},stepsFormRender:(t,a)=>{var n;return Object(h.jsx)(c.a,{destroyOnClose:!0,title:e.title,className:e.className,visible:l,maskClosable:!1,width:null!==(n=e.width)&&void 0!==n?n:1200,style:{minWidth:e.width},onCancel:()=>{e.onClose&&e.onClose(),s(!1)},footer:a,children:t})},children:e.subForm.map(((t,a)=>{var n;return Object(h.jsx)(p.b.StepForm,{layout:null!==(n=e.layout)&&void 0!==n?n:"vertical",name:"step"+a,title:t.label,onFinish:async()=>!0,children:t.component})}))})]})}))))},1022:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return r}));var n=a(100),i=a(1041),l=a.n(i);const s=(e,t)=>{let a=new FormData,i=0,s=[],r=[];e.forEach((e=>{r.push(e.arrayBuffer().then((r=>{let o=l()(r);return s.push(n.a.getFileByMD5({md5:o}).then((n=>null!==n?(t(n),Promise.resolve()):(a.append("files",e),i+=1,Promise.resolve())))),Promise.resolve()})))})),Promise.all(r).then((()=>{Promise.all(s).then((()=>{0!==i&&n.a.uploadFile(a).then((e=>{e.map((e=>{t(e)}))}))}))}))},r=(e,t)=>{let a=new FormData;a.append("file",e),n.a.uploadSingleFile(a).then((e=>{t(e)}))}},1054:function(e,t,a){"use strict";var n=a(299),i=a(178),l=(a(0),a(298)),s=a(5);t.a=Object(l.a)()((e=>{var t,a;return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(n.a.Item,{label:null!==(t=e.label)&&void 0!==t?t:e.t("title"),name:null!==(a=e.name)&&void 0!==a?a:"title",required:!0,children:Object(s.jsx)(i.a,{})})})}))},1065:function(e,t,a){"use strict";var n=a(1075),i=a(1078),l=a(1079),s=a(1080),r=a(1074),o=a(1081),c=a(5);const d={cpp:l.a,c:l.a,java:s.a,sql:r.a,python:o.a};t.a=e=>{var t;let a=[];return"text"!==e.lang&&(a=[d[e.lang]()]),Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(n.a,{value:e.value,height:"400px",readOnly:null!==(t=e.readOnly)&&void 0!==t&&t,theme:i.a,autoFocus:!0,extensions:a,basicSetup:{lineNumbers:!0,autocompletion:!0,syntaxHighlighting:!0,tabSize:4,completionKeymap:!0,lintKeymap:!0,foldKeymap:!0,searchKeymap:!0,allowMultipleSelections:!0,bracketMatching:!0},onChange:t=>{e.onChange&&e.onChange(t)}})})}},1096:function(e,t,a){"use strict";var n=a(299),i=a(178),l=(a(0),a(298)),s=a(5);t.a=Object(l.a)()((e=>{var t;return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(n.a.Item,{label:e.label,name:e.name,required:null===(t=e.required)||void 0===t||t,initialValue:e.initialValue,help:e.help,children:Object(s.jsx)(i.a,{addonAfter:e.addonAfter})})})}))},1288:function(e,t,a){"use strict";var n=a(299),i=a(1065),l=a(5);t.a=e=>Object(l.jsx)(n.a.Item,{label:e.label,name:e.name,...e,children:Object(l.jsx)(i.a,{lang:e.lang})})},1359:function(e,t,a){"use strict";var n=a(298),i=a(1054),l=a(1096),s=a(299),r=a(166),o=a(1288),c=a(965),d=a(60),u=(a(0),a(1413)),b=a(1289),m=a.n(b),j=a(67),p=a(141),h=a(1022),O=a(5);const g=e=>{var t;const{value:a,onChange:n}=e;let i=[];for(let r of e.accept.split(","))i.push("*"+r);const l=e=>{n(e.id)},s=(null!==(t=e.downloadFilename)&&void 0!==t?t:a)+e.downloadFileSuffix;return Object(O.jsxs)(O.Fragment,{children:[!Object(j.c)(a)&&Object(O.jsxs)("div",{style:{marginBottom:24},children:[Object(O.jsx)("div",{children:" \u5df2\u6709\u6587\u4ef6\uff1a "}),Object(O.jsxs)(c.b,{children:[s,Object(O.jsx)(d.a,{size:"small",onClick:()=>{const e=Object(p.a)().CLIENT_SERVER+"/api/filesys/download/"+a+"/"+s;window.open(e)},children:"\u4e0b\u8f7d"}),Object(O.jsx)(d.a,{danger:!0,size:"small",onClick:()=>{n(null)},children:"\u5220\u9664"})]})]}),Object(O.jsxs)(m.a,{multiple:!1,accept:e.accept,action:"",listType:"text",beforeUpload:t=>{"user"===e.ues?Object(h.b)(t,l):Object(h.a)([t],l)},showUploadList:!1,children:[Object(O.jsx)("p",{className:"ant-upload-drag-icon",children:Object(O.jsx)(u.a,{})}),Object(O.jsx)("p",{className:"ant-upload-text",children:"\u5355\u51fb\u6216\u62d6\u52a8\u6587\u4ef6\u5230\u6b64\u533a\u57df\u8fdb\u884c\u4e0a\u4f20"}),Object(O.jsxs)("p",{className:"ant-upload-hint",children:["\u8bf7\u4e0a\u4f20\u4e00\u4e2a ",i," \u6587\u4ef6"]})]})]})};var v=Object(n.a)()((e=>{var t;return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(s.a.Item,{label:null!==(t=e.label)&&void 0!==t?t:"\u4e0a\u4f20\u6587\u4ef6",name:e.name,rules:[{required:e.required}],children:Object(O.jsx)(g,{...e})})})}));t.a=Object(n.a)()((e=>Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(i.a,{}),Object(O.jsx)(l.a,{label:"\u5907\u6ce8",name:"comment",required:!1}),Object(O.jsx)(s.a.Item,{label:"\u6587\u4ef6\u540e\u7f00",name:"acceptFileExtensions",required:!0,children:Object(O.jsx)(r.a,{mode:"tags",style:{width:"100%"}})}),Object(O.jsx)(o.a,{label:"shell\u811a\u672c",name:"shellScript",lang:"cpp",className:"JudgeTemplateCodeEditor",rules:[{required:!0}]}),Object(O.jsx)(v,{label:"ZIP\u8d44\u6e90\u6587\u4ef6",name:"zipFileId",required:!1,accept:".zip",use:"admin",downloadFileSuffix:".zip"})]})))},1419:function(e,t,a){"use strict";a.r(t);a(0);var n=a(965),i=a(975),l=a(242),s=a(298),r=a(40),o=a(1004),c=a(243),d=a(1018),u=a(1359),b=a(5);t.default=Object(s.a)()(Object(r.e)((e=>{const t=e.location.pathname.split("/"),a=t[t.length-1];let s=[{title:"ID",dataIndex:"id",width:50,responsive:["lg","sm","xs"]},{title:e.t("Owner"),dataIndex:"username",width:"auto",responsive:["lg"]},{title:e.t("title"),dataIndex:"title",width:"auto",responsive:["lg","sm"]},{title:e.t("comment"),dataIndex:"comment",width:"auto",responsive:["lg"]},{title:e.t("CreateTime"),dataIndex:"gmtCreate",width:"auto",responsive:["lg","sm"],render:e=>Object(c.e)(parseInt(e))},{title:e.t("ModifiedTime"),dataIndex:"gmtModified",width:"auto",responsive:["lg","sm"],render:e=>Object(c.e)(parseInt(e))},{title:e.t("operator"),width:"150px",render:(e,t)=>Object(b.jsxs)(n.b,{size:3,children:[Object(b.jsx)(d.a,{TableName:"TemplateList-".concat(a),width:600,title:t.title,type:"update",subForm:[{component:Object(b.jsx)(u.a,{}),label:""}],dataLoader:async()=>l.a.getOneTemplate({id:t.id}).then((e=>Promise.resolve(e))),updateAppendProps:{id:t.id},dataSubmitter:e=>l.a.updateTemplate({type:"io"===a?0:2,...e})}),Object(b.jsx)(d.a,{TableName:"TemplateList-".concat(a),width:600,title:"\u65b0\u5efa\u6a21\u677f(\u514b\u9686\u81ea"+t.title+")",type:"fork",subForm:[{component:Object(b.jsx)(u.a,{}),label:""}],dataLoader:async()=>l.a.getOneTemplate({id:t.id}).then((e=>Promise.resolve(e))),dataSubmitter:e=>l.a.createTemplate({type:"io"===a?0:2,...e})})]})}];return Object(b.jsx)("div",{style:{marginTop:-20,overflow:"hidden"},children:Object(b.jsx)(i.a,{size:"small",bordered:!0,title:"io"===a?"\u57fa\u7840IO\u6a21\u677f":"\u9ad8\u9636\u8bc4\u6d4b\u6a21\u677f",extra:Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(d.a,{TableName:"TemplateList-".concat(a),width:600,title:"\u65b0\u5efa\u6a21\u677f",type:"create",subForm:[{component:Object(b.jsx)(u.a,{}),label:""}],dataSubmitter:e=>l.a.createTemplate({type:"io"===a?0:2,...e})})}),children:Object(b.jsx)(o.a,{name:"TemplateList-".concat(a),columns:s,API:e=>l.a.pageTemplateList({...e,type:"io"===a?0:2}),size:"small",rowKey:"id"})})})})))}}]);
//# sourceMappingURL=8.0133c5ed.chunk.js.map