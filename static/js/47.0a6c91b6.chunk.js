(this.webpackJsonpsduoj=this.webpackJsonpsduoj||[]).push([[47],{1222:function(e,t,n){"use strict";var i=n(66),s=n(100),c=n(0);t.a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;const n=Object(i.d)((t=>t.ProblemSetReducer.problemSetInfo[e])),a=Object(i.d)((t=>t.ProblemSetReducer.problemSetInfo[e+"-cache"])),r=Object(i.c)(),[l,o]=Object(c.useState)(),[d,j]=Object(c.useState)();return Object(c.useEffect)((()=>{l!==e?(void 0===a&&void 0===n?(r({type:"setProblemSetInfo",key:e+"-cache",data:!0}),s.a.getProblemSetInfo({psid:parseInt(e)}).then((t=>{r({type:"setProblemSetInfo",key:e,data:t}),r({type:"setProblemSetInfo",key:e+"-cache",data:void 0}),j(t)})).catch((e=>{t&&t(e)}))):j(n),o(e)):j(n)}),[n,e]),d}},1265:function(e,t,n){"use strict";var i=n(67);t.a=e=>Object(i.c)(e)?0:e.toString().length>6?e.toFixed(2):e},1304:function(e,t,n){"use strict";var i=n(0),s=n(243),c=n(5);t.a=e=>{const[t,n]=Object(i.useState)(Date.now());return Object(i.useEffect)((()=>{let e=setInterval((()=>{n(Date.now())}),1e3);return()=>clearInterval(e)})),Object(c.jsxs)(c.Fragment,{children:["before"===e.type&&Object(s.a)(e.time,t),"after"===e.type&&Object(s.a)(t,e.time)]})}},1379:function(e,t,n){"use strict";n.r(t);var i=n(298),s=n(40),c=n(968),a=n(974),r=n(965),l=n(972),o=n(973),d=n(60),j=n(975),b=n(1422),u=n(0),m=n(66),h=n(87),p=(n(1380),n(243)),O=n(1304),v=n(1175),g=n.n(v),x=n(1222),f=n(67),y=n(1265),S=n(35),I=n(103),_=n(5);const k=e=>{const[t,n]=Object(u.useState)(Date.now());Object(u.useEffect)((()=>{let e=setInterval((()=>{n(Date.now())}),1e3);return()=>clearInterval(e)}));let i=Object(p.b)(e.start,e.end);return Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)(j.a,{bordered:e.bordered,children:[Object(_.jsxs)("div",{className:"center",children:[Object(_.jsxs)("div",{style:{float:"left"},children:[Object(_.jsx)("div",{style:{fontWeight:"bold"},children:"\u5f00\u59cb\u65f6\u95f4\uff1a"}),Object(p.e)(e.start)]}),Object(_.jsxs)("span",{children:["wait"===i&&Object(_.jsx)("span",{style:{color:"blue"},children:Object(_.jsxs)(r.b,{children:["\u8ddd\u79bb\u5f00\u59cb\u8fd8\u6709\uff1a",Object(_.jsx)(g.a,{className:"contestHeaderTimer",value:e.start,format:"H \u65f6 m \u5206 s \u79d2"})]})}),"running"===i&&Object(_.jsx)("span",{style:{color:"red"},children:"\u8fdb\u884c\u4e2d"}),"end"===i&&Object(_.jsx)("span",{style:{color:"green"},children:"\u5df2\u7ed3\u675f"})]}),Object(_.jsxs)("div",{style:{float:"right"},children:[Object(_.jsx)("div",{style:{fontWeight:"bold"},children:"\u7ed3\u675f\u65f6\u95f4\uff1a"}),Object(p.e)(e.end)]})]}),"wait"!==i&&Object(_.jsx)(b.a,{style:{marginTop:50},tipFormatter:null,min:e.start,max:e.end,value:Math.max(Math.min(t,e.end),e.start),marks:0===e.timeSetting.length?void 0:(()=>{let t={};for(let n=0;n<e.timeSetting.length;n++){let i=e.timeSetting[n];t[i.tm_end]=(100*i.weight).toString()+"%"}return t})()}),Object(_.jsx)("div",{style:{marginTop:15},className:"center",children:Object(_.jsxs)(l.a,{children:[Object(_.jsx)(o.a,{span:8,children:"running"===i&&Object(_.jsxs)("span",{style:{float:"left"},children:[Object(_.jsx)("span",{style:{fontWeight:"bold"},children:"\u5f53\u524d\u6298\u6263\uff1a"}),(()=>{for(let t=0;t<e.timeSetting.length;t++){let n=e.timeSetting[t];if(n.tm_start<=Date.now()&&Date.now()<=n.tm_end)return(100*n.weight).toString()+"%"}})()]})}),Object(_.jsx)(o.a,{span:8}),Object(_.jsx)(o.a,{span:8,children:"running"===i&&Object(_.jsxs)("span",{style:{float:"right"},children:[Object(_.jsx)("span",{style:{fontWeight:"bold"},children:"\u6298\u6263\u5269\u4f59\uff1a"}),(()=>{for(let t=0;t<e.timeSetting.length;t++){let n=e.timeSetting[t];if(n.tm_start<=Date.now()&&Date.now()<=n.tm_end)return Object(_.jsx)(O.a,{type:"after",time:n.tm_end})}})()]})})]})})]})})};t.default=Object(m.b)((e=>{var t;const n=e.ProblemSetReducer,i=e.UserReducer;return{problemSetInfo:n.problemSetInfo,roles:null===(t=i.userInfo)||void 0===t?void 0:t.roles}}),(e=>({})))(Object(i.a)()(Object(s.e)((e=>{const t=e.match.params.problemSetId,n=Object(x.a)(t),[i,s]=Object(u.useState)(),[j,b]=Object(u.useState)(!1);return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(c.a,{visible:j,footer:!1,onOk:()=>b(!1),onCancel:()=>b(!1),children:Object(_.jsx)(a.a,{size:"small",columns:[{dataIndex:"key"},{dataIndex:"value"}],showHeader:!1,pagination:!1,dataSource:(()=>{const e=e=>Object(f.c)(e)?"\u672a\u63d0\u4ea4":Object(p.e)(e);if(2!==(null===i||void 0===i?void 0:i.proType))return[{key:"\u5f97\u5206",value:null===i||void 0===i?void 0:i.score},{key:"\u5206\u503c",value:null===i||void 0===i?void 0:i.point},{key:"\u6743\u91cd",value:null===i||void 0===i?void 0:i.weight},{key:"\u63d0\u4ea4\u65f6\u95f4",value:e(null===i||void 0===i?void 0:i.submit_time)}];{const t=[{key:"\u9650\u65f6\u63d0\u4ea4",value:null===i||void 0===i?void 0:i.e_id},{key:"\u9650\u65f6\u6743\u91cd",value:null===i||void 0===i?void 0:i.e_weight},{key:"\u9650\u65f6\u63d0\u4ea4\u65f6\u95f4",value:e(null===i||void 0===i?void 0:i.e_submit_time)}],n=[{key:"\u8865\u9898\u63d0\u4ea4",value:null===i||void 0===i?void 0:i.p_id},{key:"\u8865\u9898\u6743\u91cd",value:null===i||void 0===i?void 0:i.p_weight},{key:"\u8865\u9898\u63d0\u4ea4\u65f6\u95f4",value:e(null===i||void 0===i?void 0:i.p_submit_time)}];let s=[{key:"\u5f97\u5206",value:null===i||void 0===i?void 0:i.score},{key:"\u5206\u503c",value:null===i||void 0===i?void 0:i.point}];return"sameTimeAndPractice"===(null===i||void 0===i?void 0:i.type)?(s=s.concat(t),s=s.concat(n)):s="sameTime"===(null===i||void 0===i?void 0:i.type)?s.concat(t):s.concat(n),s}})()})}),void 0!==n&&Object(_.jsxs)(_.Fragment,{children:[(()=>{if(1===n.config.useSameSE){if("end"===Object(p.b)(n.tm_start,n.tm_end)&&1===n.config.usePractice){let e=n.config.practiceTimeSetting,t=e[0].tm_start,i=e[e.length-1].tm_end;return Object(_.jsx)("div",{style:{marginTop:24},children:Object(_.jsx)(k,{start:parseInt(t),end:parseInt(i),timeSetting:e,bordered:!1})})}return Object(_.jsx)("div",{style:{marginTop:24},children:Object(_.jsx)(k,{start:parseInt(n.tm_start),end:parseInt(n.tm_end),timeSetting:[{tm_start:n.tm_start,tm_end:n.tm_end,weight:1}],bordered:!1})})}})(),n.groupInfo.map((i=>{let c,j;null!==i.timeSetting&&(c=i.timeSetting[0].tm_start,j=i.timeSetting[i.timeSetting.length-1].tm_end);const u=[];return 2===i.type&&u.push({key:"Result",title:"\u8bc4\u6d4b\u7ed3\u679c",width:"auto",render:(e,t)=>Object(_.jsxs)(r.b,{size:24,children:[t.e_status&&Object(_.jsxs)(r.b,{size:0,children:["\u9650\u65f6\uff1a",Object(_.jsx)(I.a,{type:"text",caseType:S.b.indexOf(S.c[t.e_status])})]}),t.p_status&&Object(_.jsxs)(r.b,{size:0,children:["\u8865\u9898\uff1a",Object(_.jsx)(I.a,{type:"text",caseType:S.b.indexOf(S.c[t.p_status])})]})]})}),Object(_.jsxs)(l.a,{gutter:24,children:[Object(_.jsx)(o.a,{span:1===n.config.useSameSE?24:16,children:Object(_.jsx)(a.a,{className:"problemSet-overview-table",size:"small",title:()=>0===n.config.showScoreInRunning?Object(_.jsxs)(_.Fragment,{children:["\u9898\u7ec4",i.index+1," ",i.name]}):Object(_.jsxs)(_.Fragment,{children:["\u9898\u7ec4",i.index+1," ",i.name," ","(".concat(Object(y.a)(i.point),"\u5206)")]}),dataSource:i.problemInfo,pagination:!1,columns:[{key:"ID",title:"ID",dataIndex:"index",width:"auto",render:(n,s,c)=>Object(_.jsxs)(d.a,{type:"text",size:"small",onClick:()=>{e.history.push(h.g+"/problemSet/".concat(t,"/problem/").concat(i.index,"/").concat(c))},children:[c+1," ",s.name?"(".concat(s.name,")"):""]})},{key:"State",title:e.t("Status"),dataIndex:"hasAnswer",width:"auto",render:(e,t)=>1===i.type?e?!1===t.hasJudge&&null===t.judgeLock?"\u5df2\u63d0\u4ea4 - \u672a\u6279\u9605":!1===t.hasJudge&&null!==t.judgeLock?"\u5df2\u63d0\u4ea4 - \u6b63\u5728\u6279\u9605":!0===t.hasJudge?"\u5df2\u63d0\u4ea4 - \u5df2\u6279\u9605":"\u5df2\u63d0\u4ea4":"\u672a\u63d0\u4ea4":e?"\u5df2\u63d0\u4ea4":"\u672a\u63d0\u4ea4"},...u,{key:"Point",title:"\u5206\u6570\u4e0e\u8be6\u60c5",width:"auto",dataIndex:"point",render:(e,t)=>0===n.config.showScoreInRunning?"-":void 0===t.score?Object(_.jsxs)("span",{children:[" ","-/".concat(e.toFixed(2)),"  "]}):Object(_.jsx)("span",{children:Object(_.jsx)(d.a,{type:"link",onClick:()=>{s({...t,proType:i.type}),b(!0)},children:"".concat(Object(y.a)(t.score),"/").concat(Object(y.a)(e))})})}]})}),0===n.config.useSameSE&&Object(_.jsx)(o.a,{span:8,children:Object(_.jsx)(k,{start:parseInt(c),end:parseInt(j),timeSetting:[],bordered:!0})})]})}))]})]})}))))},1380:function(e,t,n){}}]);
//# sourceMappingURL=47.0a6c91b6.chunk.js.map