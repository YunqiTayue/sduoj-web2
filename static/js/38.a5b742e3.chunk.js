(this.webpackJsonpsduoj=this.webpackJsonpsduoj||[]).push([[38],{1181:function(e,t,s){"use strict";var a=s(972),r=s(973),i=s(178),c=s(1191),n=s(60),l=s(299),o=s(0),d=s(298),j=s(100),b=s(1368),u=s(5);t.a=Object(d.a)()((e=>{const[t,s]=Object(o.useState)(),d=()=>{j.a.getCaptcha().then((t=>{s(t.captcha),e.setImgId(t.captchaId)}))};Object(o.useEffect)((()=>{d()}),[]);const h=Object(u.jsxs)(a.a,{children:[Object(u.jsx)(r.a,{span:14,children:Object(u.jsx)(i.a,{onChange:t=>{void 0!==e.setCaptcha&&e.setCaptcha(t.target.value)}})}),Object(u.jsx)(r.a,{offset:1,span:8,children:Object(u.jsx)(c.a,{src:t,height:32})}),Object(u.jsx)(r.a,{span:1,children:Object(u.jsx)(n.a,{icon:Object(u.jsx)(b.a,{}),onClick:()=>{d()}})})]});return Object(u.jsx)(u.Fragment,{children:[""].map((()=>void 0!==e.setCaptcha?h:Object(u.jsx)(l.a.Item,{name:"captcha",label:e.t("captcha"),rules:[{required:!0}],children:h})))})}))},1182:function(e,t,s){"use strict";var a=s(299),r=s(178),i=(s(0),s(298)),c=s(100),n=s(5);t.a=Object(i.a)()((e=>Object(n.jsx)(a.a.Item,{name:"username",label:e.t("username"),rules:[{required:!1!==e.editable&&!0!==e.notRequired,message:e.t("usernameEmpty")},t=>{let{getFieldValue:s}=t;return{validator:(t,s)=>!0===e.ExistCheck?c.a.isExist({username:s}).then((e=>!1===e?Promise.resolve():!0===e?Promise.reject("\u7528\u6237\u540d\u5df2\u5b58\u5728"):Promise.reject("\u68c0\u9a8c\u5931\u8d25"))).catch((e=>Promise.reject(e))):Promise.resolve()}}],hasFeedback:!0,children:Object(n.jsx)(r.a,{disabled:!1===e.editable,bordered:e.editable})})))},1183:function(e,t,s){"use strict";var a=s(299),r=s(178),i=s(968),c=s(97),n=s(60),l=s(0),o=s(298),d=s(100),j=s(1181),b=s(5);t.a=Object(o.a)()((e=>{var t;const[s,o]=Object(l.useState)(0),[u,h]=Object(l.useState)(!1),[p,m]=Object(l.useState)(""),[O,f]=Object(l.useState)(""),[x,v]=Object(l.useState)("");return Object(l.useEffect)((()=>{let e=setInterval((()=>{s>0&&o(s-1)}),1e3);return()=>clearInterval(e)})),Object(b.jsxs)(b.Fragment,{children:[!1===e.needVerify&&Object(b.jsx)(a.a.Item,{name:"email",label:e.t("email"),rules:!0!==e.notCheck?[{type:"email",message:e.t("emailError")},{required:!1!==e.editable}]:void 0,hasFeedback:!0,children:Object(b.jsx)(r.a,{disabled:!1===e.editable,bordered:!1!==e.editable})}),!0===e.needVerify&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(i.a,{title:"\u4eba\u673a\u8eab\u4efd\u8ba4\u8bc1",visible:u,maskClosable:!1,destroyOnClose:!0,onOk:()=>{d.a.sendVerificationEmail({email:x,captcha:O,captchaId:p,event:e.emailVerifyType}).then((e=>{c.b.success("\u9a8c\u8bc1\u7801\u5df2\u53d1\u9001\u81f3\u60a8\u7684\u90ae\u7bb1"),o(60),h(!1)}))},onCancel:()=>{h(!1)},children:Object(b.jsx)(j.a,{setImgId:m,setCaptcha:f})}),Object(b.jsx)(a.a.Item,{name:"email",label:null!==(t=e.emailTitle)&&void 0!==t?t:e.t("new email"),rules:[{required:!0},t=>{let{getFieldValue:s}=t;return{validator:(t,s)=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)?!1===e.checkExist?Promise.resolve():d.a.isExist({email:s}).then((t=>!1===t?Promise.resolve():!0===t?Promise.reject(e.t("\u90ae\u7bb1\u5df2\u5b58\u5728")):Promise.reject(e.t("\u68c0\u9a8c\u5931\u8d25")))).catch((e=>Promise.reject(e))):Promise.reject(e.t("emailError"))}}],children:Object(b.jsx)(r.a,{disabled:!1===e.editable||s>0,bordered:!1!==e.editable,onPressEnter:e.onPressEnter,addonAfter:Object(b.jsx)(n.a,{type:"text",disabled:0!==s,onClick:()=>{e.getEmail().then((e=>{v(e),h(!0)})).catch((()=>{c.b.error("\u90ae\u7bb1\u4e0d\u5408\u6cd5")}))},children:0!==s?s+"s":e.t("Verify")})})}),Object(b.jsx)(a.a.Item,{name:"emailCode",label:e.t("emailCode"),rules:[{required:!0}],children:Object(b.jsx)(r.a,{onPressEnter:e.onPressEnter})})]})]})}))},1263:function(e,t,s){"use strict";var a=s(298),r=s(60),i=s(97),c=s(968),n=s(976),l=s(178),o=s(0),d=(s(1264),s(5));t.a=Object(a.a)()((e=>{const[t,s]=Object(o.useState)(!1),[a,j]=Object(o.useState)("");return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(r.a,{...e.btnProps,onClick:()=>{void 0!==e.beforeCheck?e.beforeCheck().then((()=>{s(!0)})).catch((()=>{i.b.error("\u8868\u5355\u4e0d\u5b8c\u6574")})):s(!0)},children:e.btnText}),Object(d.jsxs)(c.a,{title:"\u64cd\u4f5c\u786e\u8ba4",visible:t,className:"Reconfirm-Modal",onCancel:()=>{s(!1)},footer:[Object(d.jsxs)(r.a,{block:!0,danger:!0,disabled:e.confirm!==a,onClick:()=>{void 0!==e.API&&e.API(),j(""),s(!1)},children:[" \u6211\u786e\u5b9a\u8981",e.todo," "]})],children:[Object(d.jsx)(n.a,{message:Object(d.jsxs)("span",{style:{fontWeight:"bold"},children:["\u60a8\u786e\u5b9a\u8981",e.todo,"\u5417\uff1f"]}),type:"warning",showIcon:!0,style:{marginBottom:10}}),Object(d.jsxs)("div",{className:"Reconfirm-Modal-Input",children:["\u8bf7\u8f93\u5165 ",Object(d.jsx)("span",{style:{fontWeight:"bold"},children:e.confirm})," \u8fdb\u884c\u786e\u8ba4\u3002",Object(d.jsx)(l.a,{value:a,onChange:e=>{j(e.target.value)}})]})]})]})}))},1264:function(e,t,s){},1287:function(e,t,s){"use strict";let a,r;s.d(t,"a",(function(){return a})),function(e){e[e.Unknown=2]="Unknown",e[e.Male=1]="Male",e[e.Female=0]="Female"}(a||(a={})),function(e){e[e.boy=0]="boy",e[e.girl=1]="girl"}(r||(r={}))},1305:function(e,t,s){"use strict";var a=s(299),r=s(178),i=(s(0),s(298)),c=s(5);t.a=Object(i.a)()((e=>Object(c.jsx)(a.a.Item,{name:"nickname",label:e.t("nickname"),initialValue:e.value,children:Object(c.jsx)(r.a,{})})))},1306:function(e,t,s){"use strict";var a=s(299),r=s(178),i=(s(0),s(298)),c=s(5);t.a=Object(i.a)()((e=>Object(c.jsx)(a.a.Item,{name:"studentId",label:e.t("student_id"),initialValue:e.value,children:Object(c.jsx)(r.a,{})})))},1307:function(e,t,s){"use strict";var a=s(299),r=s(193),i=(s(0),s(298)),c=s(1287),n=s(1410),l=s(1411),o=s(1370),d=s(5);t.a=Object(i.a)()((e=>{const t=[{label:Object(d.jsx)(n.a,{style:{color:"rgb(30,112,185)"}}),value:c.a.Male},{label:Object(d.jsx)(l.a,{style:{color:"rgb(230,0,126)"}}),value:c.a.Female},{label:Object(d.jsx)(o.a,{}),value:c.a.Unknown}];return Object(d.jsx)(a.a.Item,{name:"gender",label:e.t("sex"),children:Object(d.jsx)(r.a.Group,{options:t,optionType:"button"})})}))},1308:function(e,t,s){"use strict";var a=s(299),r=s(178),i=(s(0),s(298)),c=s(5);t.a=Object(i.a)()((e=>Object(c.jsx)(a.a.Item,{name:"phone",label:e.t("phone"),initialValue:e.value,rules:[{required:e.required}],children:Object(c.jsx)(r.a,{})})))},1309:function(e,t,s){"use strict";var a=s(299),r=s(166),i=(s(0),s(298)),c=s(5);t.a=Object(i.a)()((e=>Object(c.jsx)(a.a.Item,{name:"roles",label:e.t("roles"),rules:[{required:e.editable,message:"Please select roles!"}],initialValue:e.value,children:Object(c.jsxs)(r.a,{mode:"multiple",allowClear:!0,disabled:!1===e.editable,bordered:e.editable,children:[Object(c.jsx)(r.a.Option,{value:"user",children:e.t("user")}),Object(c.jsx)(r.a.Option,{value:"admin",children:e.t("admin")}),Object(c.jsx)(r.a.Option,{value:"superadmin",children:e.t("superadmin")})]})})))},1368:function(e,t,s){"use strict";var a=s(1),r=s(0),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},c=s(12),n=function(e,t){return r.createElement(c.a,Object(a.a)(Object(a.a)({},e),{},{ref:t,icon:i}))};n.displayName="RedoOutlined";t.a=r.forwardRef(n)},1370:function(e,t,s){"use strict";var a=s(1),r=s(0),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M764 280.9c-14-30.6-33.9-58.1-59.3-81.6C653.1 151.4 584.6 125 512 125s-141.1 26.4-192.7 74.2c-25.4 23.6-45.3 51-59.3 81.7-14.6 32-22 65.9-22 100.9v27c0 6.2 5 11.2 11.2 11.2h54c6.2 0 11.2-5 11.2-11.2v-27c0-99.5 88.6-180.4 197.6-180.4s197.6 80.9 197.6 180.4c0 40.8-14.5 79.2-42 111.2-27.2 31.7-65.6 54.4-108.1 64-24.3 5.5-46.2 19.2-61.7 38.8a110.85 110.85 0 00-23.9 68.6v31.4c0 6.2 5 11.2 11.2 11.2h54c6.2 0 11.2-5 11.2-11.2v-31.4c0-15.7 10.9-29.5 26-32.9 58.4-13.2 111.4-44.7 149.3-88.7 19.1-22.3 34-47.1 44.3-74 10.7-27.9 16.1-57.2 16.1-87 0-35-7.4-69-22-100.9zM512 787c-30.9 0-56 25.1-56 56s25.1 56 56 56 56-25.1 56-56-25.1-56-56-56z"}}]},name:"question",theme:"outlined"},c=s(12),n=function(e,t){return r.createElement(c.a,Object(a.a)(Object(a.a)({},e),{},{ref:t,icon:i}))};n.displayName="QuestionOutlined";t.a=r.forwardRef(n)},1404:function(e,t,s){"use strict";s.r(t);var a=s(0),r=s.n(a),i=s(40),c=s(972),n=s(973),l=s(975),o=s(299),d=s(1108),j=s(97),b=s(1213),u=s(1183),h=s(1182),p=s(66),m=s(298),O=s(1305),f=s(1306),x=s(1307),v=s(1308),g=s(1309),y=s(100),P=s(390),I=s(258),C=s(1263),E=s(67),k=s(241),w=s(5);var V=e=>!0===e.loading?Object(w.jsx)("div",{className:"page-center",children:Object(w.jsx)(k.a,{size:"large"})}):e.content,F=s(87);class A extends a.Component{constructor(){super(...arguments),this.ref1=r.a.createRef(),this.ref2=r.a.createRef(),this.ref3=r.a.createRef()}componentDidMount(){this.props.isLogin||(console.log("not login"),this.props.history.replace(F.g+"/login?to="+this.props.location.pathname))}componentDidUpdate(e,t,s){this.props.isLogin||this.props.history.replace(F.g+"/login?to="+this.props.location.pathname)}render(){var e;return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(V,{loading:void 0===this.props.userInfo,content:Object(w.jsx)("div",{style:{textAlign:"center",margin:"0 auto"},children:Object(w.jsx)("div",{style:{textAlign:"left",maxWidth:"1500px",margin:"0 auto"},children:Object(w.jsxs)(c.a,{style:{marginTop:0},children:[Object(w.jsxs)(n.a,{span:16,children:[Object(w.jsx)(l.a,{title:this.props.t("Profile"),children:Object(w.jsx)(o.a,{initialValues:this.props.userInfo,ref:this.ref1,children:Object(w.jsxs)(c.a,{children:[Object(w.jsxs)(n.a,{span:11,children:[Object(w.jsx)(h.a,{editable:!1}),Object(w.jsx)(O.a,{}),Object(w.jsx)(f.a,{}),Object(w.jsx)(P.a,{API:async()=>{var e;return null===(e=this.ref1.current)||void 0===e?void 0:e.validateFields().then((e=>y.a.updateProfile(e).then((e=>(y.a.getProfile().then((e=>{this.props.setUserInfo(e)})),Promise.resolve(this.props.t("success"))))))).catch((e=>Promise.reject(e)))},btnProps:{type:"default"},btnText:this.props.t("update")})]}),Object(w.jsxs)(n.a,{span:11,offset:1,children:[Object(w.jsx)(x.a,{}),Object(w.jsx)(v.a,{}),Object(w.jsx)(u.a,{needVerify:!1,editable:!1}),Object(w.jsx)(g.a,{editable:!1})]})]})})}),Object(w.jsx)(l.a,{style:{marginTop:30},title:this.props.t("ChangePass"),children:Object(w.jsx)(o.a,{ref:this.ref2,layout:"vertical",children:Object(w.jsxs)(c.a,{children:[Object(w.jsxs)(n.a,{span:11,children:[Object(w.jsx)(I.a,{oldpass:!0}),Object(w.jsx)(P.a,{API:async()=>{var e;return null===(e=this.ref2.current)||void 0===e?void 0:e.validateFields().then((e=>y.a.updatePassword(e).then((e=>{var t;return null===(t=this.ref2.current)||void 0===t||t.resetFields(),Promise.resolve(this.props.t("success"))})))).catch((e=>Promise.reject(e)))},btnProps:{type:"default"},btnText:this.props.t("update")})]}),Object(w.jsx)(n.a,{offset:1,span:11,children:Object(w.jsx)(I.a,{newpass:!0})})]})})}),Object(w.jsx)(l.a,{style:{marginTop:30},title:this.props.t("modifyEmail"),children:Object(w.jsx)(o.a,{ref:this.ref3,layout:"vertical",children:Object(w.jsxs)(c.a,{children:[Object(w.jsxs)(n.a,{span:11,children:[Object(w.jsx)(I.a,{noConfirm:!0}),Object(w.jsx)(P.a,{API:async()=>{var e;return null===(e=this.ref3.current)||void 0===e?void 0:e.validateFields().then((e=>y.a.updateEmail(e).then((e=>{var t;return null===(t=this.ref3.current)||void 0===t||t.resetFields(),Promise.resolve(this.props.t("success"))})))).catch((e=>Promise.reject(e)))},btnProps:{type:"default"},btnText:this.props.t("update")})]}),Object(w.jsx)(n.a,{offset:1,span:11,children:Object(w.jsx)(u.a,{needVerify:!0,emailVerifyType:"updateEmail",getEmail:async()=>{var e;return null===(e=this.ref3.current)||void 0===e?void 0:e.validateFields(["email"]).then((e=>Promise.resolve(e.email))).catch((()=>Promise.reject()))}})})]})})})]}),Object(w.jsxs)(n.a,{span:7,style:{marginLeft:"30px"},children:[Object(w.jsx)(l.a,{children:Object(w.jsxs)("div",{style:{textAlign:"center",margin:"0 auto"},children:[Object(w.jsxs)("div",{children:[Object(w.jsx)(b.a,{email:null===(e=this.props.userInfo)||void 0===e?void 0:e.email,size:150}),Object(w.jsx)("br",{})]}),Object(w.jsxs)("div",{style:{marginTop:25},children:[this.props.t("weUse")," ",Object(w.jsx)("a",{href:"https://cravatar.cn/",children:"Cravatar"})," ",this.props.t("toPresentYourAvatarIcon")]})]})}),[""].map((()=>{var e;if(!Object(E.c)(null===(e=this.props.userInfo)||void 0===e?void 0:e.sduId))return Object(w.jsx)(l.a,{title:"SDUCAS\uff08".concat(this.props.t("sduUnifiedIdentityPlatform"),"\uff09"),style:{marginTop:30},children:Object(w.jsxs)("div",{style:{textAlign:"center",margin:"0 auto"},children:[this.props.userInfo.sduId,Object(w.jsx)(d.a,{type:"vertical"}),Object(w.jsx)(C.a,{btnProps:{size:"small",type:"link"},btnText:this.props.t("unbinding"),todo:this.props.t("unbindSdusForUnifiedAuthentication"),confirm:this.props.userInfo.sduId,API:()=>{y.a.thirdPartyUnbinding({thirdParty:"SDUCAS"}).then((e=>{y.a.getProfile().then((e=>{this.props.setUserInfo(e)})),j.b.success(this.props.t("unwindingSuccessful"))}))}})]})})}))]})]})})})})})}}t.default=Object(p.b)((e=>{const t=e.UserReducer;return{isLogin:t.isLogin,userInfo:t.userInfo}}),(e=>({setUserInfo:t=>e({type:"setUserInfo",data:t})})))(Object(m.a)()(Object(i.e)(A)))},1410:function(e,t,s){"use strict";var a=s(1),r=s(0),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M874 120H622c-3.3 0-6 2.7-6 6v56c0 3.3 2.7 6 6 6h160.4L583.1 387.3c-50-38.5-111-59.3-175.1-59.3-76.9 0-149.3 30-203.6 84.4S120 539.1 120 616s30 149.3 84.4 203.6C258.7 874 331.1 904 408 904s149.3-30 203.6-84.4C666 765.3 696 692.9 696 616c0-64.1-20.8-124.9-59.2-174.9L836 241.9V402c0 3.3 2.7 6 6 6h56c3.3 0 6-2.7 6-6V150c0-16.5-13.5-30-30-30zM408 828c-116.9 0-212-95.1-212-212s95.1-212 212-212 212 95.1 212 212-95.1 212-212 212z"}}]},name:"man",theme:"outlined"},c=s(12),n=function(e,t){return r.createElement(c.a,Object(a.a)(Object(a.a)({},e),{},{ref:t,icon:i}))};n.displayName="ManOutlined";t.a=r.forwardRef(n)},1411:function(e,t,s){"use strict";var a=s(1),r=s(0),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M712.8 548.8c53.6-53.6 83.2-125 83.2-200.8 0-75.9-29.5-147.2-83.2-200.8C659.2 93.6 587.8 64 512 64s-147.2 29.5-200.8 83.2C257.6 200.9 228 272.1 228 348c0 63.8 20.9 124.4 59.4 173.9 7.3 9.4 15.2 18.3 23.7 26.9 8.5 8.5 17.5 16.4 26.8 23.7 39.6 30.8 86.3 50.4 136.1 57V736H360c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h114v140c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V812h114c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8H550V629.5c61.5-8.2 118.2-36.1 162.8-80.7zM512 556c-55.6 0-107.7-21.6-147.1-60.9C325.6 455.8 304 403.6 304 348s21.6-107.7 60.9-147.1C404.2 161.5 456.4 140 512 140s107.7 21.6 147.1 60.9C698.4 240.2 720 292.4 720 348s-21.6 107.7-60.9 147.1C619.7 534.4 567.6 556 512 556z"}}]},name:"woman",theme:"outlined"},c=s(12),n=function(e,t){return r.createElement(c.a,Object(a.a)(Object(a.a)({},e),{},{ref:t,icon:i}))};n.displayName="WomanOutlined";t.a=r.forwardRef(n)}}]);
//# sourceMappingURL=38.a5b742e3.chunk.js.map