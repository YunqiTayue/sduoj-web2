(this.webpackJsonpsduoj=this.webpackJsonpsduoj||[]).push([[37],{1004:function(e,t,n){"use strict";var s=n(975),o=n(299),a=n(965),r=n(60),i=n(1085),c=n(974),l=n(0),d=n(87),u=n(66),b=n(298),m=n(40),j=n(302),p=n(67),h=n(292),O=n(5);t.a=Object(u.b)((e=>{var t;const n=e.UserReducer,s=e.TableReduce;return{roles:null===(t=n.userInfo)||void 0===t?void 0:t.roles,tableData:{...s.tableData}}}),(e=>({setTableInfo:(t,n)=>e({type:"setTableInfo",name:t,data:n}),setDataSource:(t,n)=>e({type:"setDataSource",data:t,name:n,add:!1})})))(Object(b.a)()(Object(m.e)((e=>{var t,n;const[u,b]=Object(l.useState)(0),[m,v]=Object(l.useState)(),[f,x]=Object(l.useState)(!0),[y,g]=Object(l.useState)(1),[S,w]=Object(l.useState)(Object(p.a)(e.defaultPageSize,d.h)),[I,C]=Object(l.useState)(),[k,N]=Object(l.useState)(0),T=t=>{v(t),void 0!==e.setDataSource&&void 0!==e.name&&e.setDataSource(t,e.name)},P=(t,n,s,o)=>{var a,r,i,c,l;const d=null===(a=e.tableData[e.name])||void 0===a?void 0:a.tableInfo;var u,m,j,p;void 0!==d&&(void 0===o&&void 0!==d.moreProps&&D.setFieldsValue(d.moreProps),t=null!==(u=t)&&void 0!==u?u:d.pageNow,n=null!==(m=n)&&void 0!==m?m:d.pageSize,s=null!==(j=s)&&void 0!==j?j:d.searchKey,o=null!==(p=o)&&void 0!==p?p:d.moreProps);let h=null!==(r=t)&&void 0!==r?r:y,O=null!==(i=n)&&void 0!==i?i:S,v=null!==(c=s)&&void 0!==c?c:I,f=null!==(l=o)&&void 0!==l?l:D.getFieldsValue();g(h),w(O),C(v),x(!0),e.API({pageNow:h,pageSize:O,searchKey:v,...f}).then((t=>{null===t.rows&&(t.rows=[]),void 0!==e.APIRowsTransForm?T(e.APIRowsTransForm(t.rows)):T(t.rows),void 0!==t.totalNum&&"0"!==t.totalNum?(b(t.totalNum),e.name&&e.setTableInfo(e.name,{total:t.totalNum,pageNow:h,pageSize:O,searchKey:v,moreProps:f})):(b(O*t.totalPage),e.name&&e.setTableInfo(e.name,{total:O*t.totalPage,pageNow:h,pageSize:O,searchKey:v,moreProps:f})),x(!1)}))};Object(l.useEffect)((()=>{D.setFieldsValue(e.initRequestProps),P()}),[e.name]);const[D]=Object(h.a)(),A=()=>{const e=D.getFieldsValue();"{}"!==JSON.stringify(e)&&P(1,S,void 0,e)},R=()=>{var t;const n=D.getFieldsValue();D.resetFields();const s=null===(t=e.tableData[e.name])||void 0===t?void 0:t.tableInfo;e.name&&e.setTableInfo(e.name,{total:s.total,pageNow:s.pageNow,pageSize:s.pageSize,searchKey:s.searchKey,moreProps:void 0});const o=D.getFieldsValue();JSON.stringify(n)!==JSON.stringify(o)&&P(1,S,void 0,void 0)};return Object(l.useEffect)((()=>{var t;const n=null===(t=e.tableData[e.name])||void 0===t?void 0:t.tableVersion;if(void 0!==n&&k!==n)if(n<0){var s;N(-n),v(null===(s=e.tableData[e.name])||void 0===s?void 0:s.dataSource)}else{N(n);const e=D.getFieldsValue();P(y,S,I,e)}}),[e.tableData,k]),Object(O.jsxs)(O.Fragment,{children:[e.useList&&Object(O.jsx)(s.a,{title:e.title,bordered:!0,size:"default",className:null!==(t=e.cardProps)&&void 0!==t?t:"zeroBodyPaddingLeft",extra:(!0===e.search||void 0!==e.getForm)&&Object(O.jsxs)(O.Fragment,{children:[!0===e.search&&Object(O.jsx)(j.a,{placeholder:e.t("searchUser"),onSearch:e=>{C(e),g(1);const t=D.getFieldsValue();P(1,S,e,t)},enterButton:!0,style:{width:300}},"search"),void 0!==e.getForm&&Object(O.jsxs)(o.a,{form:D,children:[e.getForm(A),e.useFormBtn&&Object(O.jsxs)(a.b,{style:{marginLeft:"30px"},size:20,children:[Object(O.jsx)(r.a,{type:"primary",onClick:A,children:"\u7b5b\u9009"}),Object(O.jsx)(r.a,{htmlType:"button",onClick:R,children:"\u91cd\u7f6e"})]})]})]}),children:Object(O.jsx)(i.b,{grid:e.grid,itemLayout:"vertical",loading:f,size:e.size,dataSource:m,renderItem:e.renderItem,pagination:{onChange:(e,t)=>{P(e,t)},current:y,pageSize:S,total:u,size:"small",hideOnSinglePage:!0,showQuickJumper:!0,showLessItems:!0,showSizeChanger:Object(p.a)(e.showSizeChanger,!0),pageSizeOptions:["5","15","20","50","80"]}})}),!e.useList&&Object(O.jsx)(s.a,{bordered:!1,size:"small",extra:(!0===e.search||void 0!==e.getForm)&&Object(O.jsxs)(O.Fragment,{children:[!0===e.search&&Object(O.jsx)(j.a,{placeholder:"\u641c\u7d22",onSearch:e=>{C(e),g(1),P(1,S,e)},enterButton:!0,style:{width:300}},"search"),void 0!==e.getForm&&Object(O.jsxs)(o.a,{form:D,children:[e.getForm(A),Object(O.jsxs)(a.b,{style:{marginLeft:"30px"},size:20,children:[Object(O.jsx)(r.a,{type:"primary",onClick:A,children:e.t("filtering")}),Object(O.jsx)(r.a,{htmlType:"button",onClick:R,children:e.t("Reset")})]})]})]}),children:Object(O.jsx)(c.a,{rowKey:e.rowKey,loading:f,size:e.size,columns:e.columns,rowSelection:e.rowSelection,dataSource:m,pagination:null!==(n=e.pagination)&&void 0!==n?n:{onChange:(e,t)=>{P(e,t)},current:y,pageSize:S,total:u,hideOnSinglePage:!1,showQuickJumper:!0,showLessItems:!0,showSizeChanger:Object(p.a)(e.showSizeChanger,!0),pageSizeOptions:["5","15","20","50","80"]}})})]})}))))},1015:function(e,t,n){"use strict";var s=n(1071),o=n.n(s),a=n(67);const r="https://oj.qd.sdu.edu.cn";var i=n(0),c=n(5);t.a=e=>{const[t,n]=Object(i.useState)(!1),[s,l]=Object(i.useState)(!1);return Object(i.useEffect)((()=>{Object(a.c)(e.text)||t||s===e.text||(n(!0),l(e.text),function(e,t){var n,s,i;(Object(a.c)(e)||Object(a.c)(null===(n=e)||void 0===n?void 0:n.trim()))&&(e=""),e=null===(i=e=null===(s=e)||void 0===s?void 0:s.replaceAll(/`{3}\n([-|0-9a-zA-Z])/g,"```plaintext\n$1"))||void 0===i?void 0:i.replaceAll(/\$\n(.*)\n\$/g,"$ $1 $");const c={mode:"light",cdn:r+"/vditor",emojiPath:r+"/vditor/dist/images/emoji",theme:{path:r+"/vditor/dist/css/content-theme"},hljs:{lineNumber:!1},markdown:{toc:!0,mark:!0,footnotes:!0,autoSpace:!0},math:{inlineDigit:!0,engine:"KaTeX"}};return o.a.preview(document.getElementById(t),e,c)}(e.text,e.id).then((e=>{n(!1)})))}),[e.id,e.text,t]),Object(c.jsx)("div",{id:e.id,style:{overflowY:"hidden"}})}},1019:function(e,t,n){"use strict";var s=n(298),o=n(74),a=n(60),r=n(965),i=n(299),c=n(178),l=n(166),d=n(975),u=n(97),b=n(309),m=n(100),j=n(964),p=n(35),h=n(103),O=n(0),v=n(127),f=n.n(v),x=n(1028),y=n(187),g=n(66),S=n(40),w=n(67),I=n(185),C=n(1031),k=n(5);t.a=Object(g.b)((e=>{var t;const n=e.TableReduce,s=e.UserReducer;return{tableData:n.tableData,roles:null===(t=s.userInfo)||void 0===t?void 0:t.roles,isLogin:s.isLogin}}),(e=>({addTableVersion:t=>e({type:"addTableVersion",name:t}),setSelectedRowKeys:(t,n)=>e({type:"setSelectedRowKeys",data:t,name:n}),setDataSource:(t,n)=>e({type:"setDataSource",data:t,name:n,add:!0}),setTopSubmission:(t,n)=>e({type:"setTopSubmission",submissionID:t,submissionInfo:n}),setSubmissionModalVis:t=>e({type:"setSubmissionModalVis",data:t})})))(Object(s.a)()(Object(S.e)((e=>{var t,n;const[s,v]=Object(O.useState)(!1),[g,S]=Object(O.useState)([]),[N,T]=Object(O.useState)(!1),P=Object(w.a)(null===(t=e.tableData[e.name])||void 0===t?void 0:t.selectedRowKeys,[]),D=Object(w.a)(null===(n=e.tableData[e.name])||void 0===n?void 0:n.dataSource,[]),A=t=>{e.setTopSubmission(t.submissionId,{title:t.problemTitle,TimeLimit:t.timeLimit,MemoryLimit:t.memoryLimit,scoreMod:void 0===t.sumScore?"disable":"show",sumScore:t.sumScore,testcaseMod:"show",QuerySubmissionAPI:e.QuerySubmissionAPI}),e.setSubmissionModalVis(!0)},R=[{title:e.t("results"),dataIndex:"result",key:"result",render:(e,t)=>Object(k.jsx)("div",{style:{cursor:"pointer"},onClick:()=>{A(t)},children:Object(k.jsx)(h.a,{type:"text",caseType:p.b.indexOf(p.c[e]),append:"-2"===e?"("+t.RunningStep+"/"+(t.checkpointNum+t.publicCheckpointNum)+")":""})})},{title:e.t("score"),dataIndex:"score",key:"score",render:(e,t)=>void 0===t.sumScore?e:Math.floor(e/t.sumScore*100)+"%"},{title:e.t("submissionTime"),dataIndex:"submitTime",key:"submitTime",render:e=>Object(k.jsx)(o.a,{title:f()(e).format("YYYY-MM-DD HH:mm:ss"),children:Object(k.jsx)("span",{children:f()(e).fromNow()})})}],E=[{title:"ID",dataIndex:"submissionId",key:"submissionId",render:(e,t)=>Object(k.jsx)(a.a,{type:"link",size:"small",onClick:()=>{A(t)},children:e})},{title:e.t("username"),dataIndex:"username",key:"username"},{title:e.t("problemNo."),dataIndex:"problemCode",key:"problemCode",render:e.problemCodeRender},{title:e.t("problemName"),dataIndex:"problemTitle",key:"problemTitle"},{title:e.t("results"),dataIndex:"result",key:"result",width:170,render:(e,t)=>Object(k.jsx)("div",{style:{cursor:"pointer"},onClick:()=>{A(t)},children:Object(k.jsx)(h.a,{type:"text",caseType:p.b.indexOf(p.c[e]),append:"-2"===e?"("+t.RunningStep+"/"+(t.checkpointNum+t.publicCheckpointNum)+")":""})})},{title:e.t("score"),dataIndex:"score",key:"score",render:(e,t)=>void 0===t.sumScore?e:Math.floor(e/t.sumScore*100)+"%"},{title:e.t("template"),dataIndex:"judgeTemplateTitle",key:"judgeTemplateTitle"},{title:e.t("memoryUsage"),dataIndex:"usedMemory",key:"usedMemory",render:e=>e+" KB"},{title:e.t("timeUsage"),dataIndex:"usedTime",key:"usedTime",render:e=>e+" ms"},{title:e.t("submissionTime"),dataIndex:"submitTime",key:"submitTime",render:e=>Object(k.jsx)(o.a,{title:f()(e).format("YYYY-MM-DD HH:mm:ss"),children:Object(k.jsx)("span",{children:f()(e).fromNow()})})}];return Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(d.a,{title:Object(k.jsxs)(r.b,{children:[void 0!==e.title?e.title:e.t("submissionRecord"),Object(k.jsx)(b.a,{open:s,dataHandle:t=>{const n=t[0],s=(t[1],t[2]),o=t[3],a=(t[4],t[5]),r=t[6],i=t[7],c=t[8];let l=D;const d=l.findIndex((e=>e.submissionId===n));if(-1!==d){if(o<0){l[d].result=o.toString(),-1===o&&(l[d].result=a,l[d].score=r,l[d].usedTime=i,l[d].usedMemory=c);let e=0;for(const t of l)parseInt(t.result)<=0&&(e+=1);0===e&&v(!1)}else{let e=0;0===s?e=o+1:1===s&&(e=l[d].checkpointNum+o+1),l[d].RunningStep<e&&(l[d].RunningStep=e,l[d].score+=r)}e.setDataSource(l,e.name)}},queryList:g})]}),style:e.lessInfo?{}:{minWidth:1200},className:e.lessInfo?"smallBodyPadding":"",extra:Object(k.jsxs)(r.b,{children:[!0!==e.lessInfo&&Object(I.a)(e.roles,["admin","superadmin"])&&Object(k.jsx)(y.a,{API:m.a.rejudge,data:P,afterSuccess:()=>{e.addTableVersion(e.name),e.setSelectedRowKeys([],e.name)}}),Object(k.jsx)(a.a,{icon:Object(k.jsx)(j.a,{}),onClick:()=>{T(!0),e.addTableVersion(e.name),u.b.success(e.t("refreshSuccessfully")),setTimeout((()=>{T(!1)}),3e3)},disabled:N,children:e.t("refresh")})]}),actions:e.lessInfo&&e.isLogin?[Object(k.jsx)("div",{children:e.lessInfo&&e.isLogin&&Object(k.jsx)(C.a,{btnProps:{type:"text",block:!0},btnText:e.t("ShowAllInformation"),name:"Pro-SubmissionList-"+e.name,API:e.API,QuerySubmissionAPI:e.QuerySubmissionAPI})})]:void 0,children:Object(k.jsx)(x.a,{disableSelection:e.lessInfo||!Object(I.a)(e.roles,["admin","superadmin"]),defaultPageSize:e.lessInfo?5:void 0,showSizeChanger:!e.lessInfo&&void 0,pagination:!e.lessInfo&&void 0,columns:e.lessInfo?R:E,getForm:!0===e.useForm?t=>Object(k.jsxs)(r.b,{size:30,children:[Object(k.jsx)(i.a.Item,{label:e.t("username"),name:"username",children:Object(k.jsx)(c.a,{onPressEnter:e=>{t()},allowClear:!0})}),Object(k.jsx)(i.a.Item,{label:e.t("problemNo."),name:"problemCode",children:Object(k.jsx)(c.a,{onPressEnter:e=>{t()},allowClear:!0})}),Object(k.jsx)(i.a.Item,{label:e.t("JudgeResult"),name:"judgeResult",children:Object(k.jsx)(l.a,{onChange:t,allowClear:!0,style:{width:200},children:p.a.map((e=>Object(k.jsx)(l.a.Option,{value:parseInt(e),children:Object(k.jsx)(h.a,{type:"text",caseType:p.b.indexOf(p.c[e])})})))})})]}):void 0,name:e.name,size:"small",rowKey:"submissionId",API:t=>{if("problemCode"in t&&!Object(w.c)(t.problemCode)){let e=t.problemCode;1===e.length?(null!==e.match(/^[a-z]$/)&&(e=(e.charCodeAt(0)-"a".charCodeAt(0)+1).toString()),null!==e.match(/^[A-Z]$/)&&(e=(e.charCodeAt(0)-"A".charCodeAt(0)+1).toString())):null!==e.match(/^[0-9]{4}$/)&&(e="SDUOJ-"+e),t.problemCode=e}return e.API(t)},APIRowsTransForm:e=>{Object(w.c)(e)&&(e=[]);let t=[],n=[];for(const s of e)s.judgeResult<=0&&t.push(s.submissionId),n.push({...s,score:s.judgeScore,RunningStep:0,result:s.judgeResult.toString(),sumScore:s.sumScore,submitTime:parseInt(s.gmtCreate)});return 0!==t.length&&(v(!0),S(t)),n}})})})}))))},1026:function(e,t,n){"use strict";var s=n(974),o=n(0),a=n.n(o),r=n(66),i=n(298),c=n(40),l=n(1049),d=n(1432),u=n(1048),b=n(5);t.a=a.a.memo(Object(r.b)((e=>({tableData:{...e.TableReduce.tableData}})),(e=>({setTableInfo:(t,n)=>e({type:"setTableInfo",name:t,data:n}),setDataSource:(t,n)=>e({type:"setDataSource",data:t,name:n,add:!1})})))(Object(i.a)()(Object(c.e)((e=>{const[t,n]=Object(o.useState)([]),[a,r]=Object(o.useState)(!0),[i,c]=Object(o.useState)(0),m=t=>{n(t),void 0!==e.setDataSource&&void 0!==e.name&&e.setDataSource(t,e.name)},j=()=>{r(!0),e.API().then((t=>{null===t&&(t=[]),void 0!==e.APIRowsTransForm?m(e.APIRowsTransForm(t)):m(t),r(!1)}))};Object(o.useEffect)((()=>{j()}),[e.name]),Object(o.useEffect)((()=>{var t;const s=null===(t=e.tableData[e.name])||void 0===t?void 0:t.tableVersion;var o;void 0!==s&&i!==s&&(s<0?(c(-s),n(null===(o=e.tableData[e.name])||void 0===o?void 0:o.dataSource)):(c(s),j()))}),[e.tableData,i]);const p=Object(l.c)((()=>Object(b.jsx)(d.a,{style:{cursor:"grab",color:"#999"}}))),h=Object(l.b)((e=>Object(b.jsx)("tr",{...e}))),O=Object(l.a)((e=>Object(b.jsx)("tbody",{...e}))),v=n=>{let{oldIndex:s,newIndex:o}=n;s!==o&&(m(Object(u.a)(t,s,o)),e.afterDrag&&e.afterDrag(t,s,o))},f=[{title:"",dataIndex:"sort",width:50,className:"drag-visable",render:()=>Object(b.jsx)(p,{})}];let x=e.columns;return e.useDrag&&(x=f.concat(x)),Object(b.jsx)(s.a,{...e,rowSelection:e.rowSelection,rowKey:e.rowKey,loading:a,size:e.size,columns:x,dataSource:t,pagination:!1,components:{body:{wrapper:e=>Object(b.jsx)(O,{useDragHandle:!0,disableAutoscroll:!0,helperClass:"row-dragging",onSortEnd:v,...e}),row:n=>{let{className:s,style:o,...a}=n;const r=t.findIndex((t=>t[e.rowKey]===a["data-row-key"]));return Object(b.jsx)(h,{index:r,...a})}}}})})))),((e,t)=>{var n,s;return e.columns===t.columns&&(null===(n=e.rowSelection)||void 0===n?void 0:n.selectedRowKeys.length)===(null===(s=t.rowSelection)||void 0===s?void 0:s.selectedRowKeys.length)&&e.tableData===t.tableData&&e.updateTrick===t.updateTrick}))},1028:function(e,t,n){"use strict";var s=n(0),o=n(298),a=n(40),r=n(66),i=n(1004),c=n(67),l=n(1026),d=n(5);class u extends s.Component{constructor(){super(...arguments),this.setSelectedRowKeys=e=>{this.props.setSelectedRowKeys(e,this.props.name)}}componentDidMount(){}render(){var e;const t=Object(c.a)(null===(e=this.props.tableData[this.props.name])||void 0===e?void 0:e.selectedRowKeys,[]);let n={selectedRowKeys:t,onChange:e=>{this.setSelectedRowKeys(e)},selections:[{key:"all",text:this.props.t("selectedAll"),onSelect:e=>{let n=e;n=n.concat(t.filter((t=>!e.includes(t)))),this.setSelectedRowKeys(n)}},{key:"clear",text:this.props.t("clear"),onSelect:e=>{let n=t.filter((t=>!e.includes(t)));this.setSelectedRowKeys(n)}},{key:"invert",text:this.props.t("invert"),onSelect:e=>{let n=e.filter((e=>!t.includes(e)));n=n.concat(t.filter((t=>!e.includes(t)))),this.setSelectedRowKeys(n)}}]};return Object(d.jsxs)(d.Fragment,{children:[this.props.uesAlldata&&Object(d.jsx)(l.a,{...this.props,rowSelection:this.props.disableSelection?void 0:n}),!0!==this.props.uesAlldata&&Object(d.jsx)(i.a,{...this.props,rowSelection:this.props.disableSelection?void 0:n})]})}}t.a=Object(r.b)((e=>({tableData:e.TableReduce.tableData})),(e=>({setSelectedRowKeys:(t,n)=>e({type:"setSelectedRowKeys",data:t,name:n})})))(Object(o.a)()(Object(a.e)(u)))},1031:function(e,t,n){"use strict";var s=n(298),o=n(40),a=n(0),r=n(60),i=n(968),c=n(1019),l=n(5);t.a=Object(s.a)()(Object(o.e)((e=>{const[t,n]=Object(a.useState)(!1);return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(r.a,{...e.btnProps,onClick:()=>{n(!0)},children:e.btnText}),Object(l.jsx)(i.a,{width:1250,visible:t,footer:!1,onCancel:()=>{n(!1)},children:Object(l.jsx)(c.a,{...e})})]})})))},1050:function(e,t,n){"use strict";var s=n(4),o=n(15),a=n(3),r=n(2),i=n.n(r),c=n(128),l=n(0),d=n(36),u=n(23),b=n(165);function m(e){return-1!==b.a.indexOf(e)}var j=function(e){var t,n=e.className,o=e.prefixCls,r=e.style,c=e.color,u=e.children,b=e.text,j=e.placement,p=void 0===j?"end":j,h=l.useContext(d.b),O=h.getPrefixCls,v=h.direction,f=O("ribbon",o),x=m(c),y=i()(f,"".concat(f,"-placement-").concat(p),(t={},Object(s.a)(t,"".concat(f,"-rtl"),"rtl"===v),Object(s.a)(t,"".concat(f,"-color-").concat(c),x),t),n),g={},S={};return c&&!x&&(g.background=c,S.color=c),l.createElement("div",{className:"".concat(f,"-wrapper")},u,l.createElement("div",{className:y,style:Object(a.a)(Object(a.a)({},g),r)},l.createElement("span",{className:"".concat(f,"-text")},b),l.createElement("div",{className:"".concat(f,"-corner"),style:S})))},p=n(10);function h(e){var t,n=e.prefixCls,s=e.value,o=e.current,a=e.offset,r=void 0===a?0:a;return r&&(t={position:"absolute",top:"".concat(r,"00%"),left:0}),l.createElement("span",{style:t,className:i()("".concat(n,"-only-unit"),{current:o})},s)}function O(e,t,n){for(var s=e,o=0;(s+10)%10!==t;)s+=n,o+=n;return o}function v(e){var t,n,s=e.prefixCls,o=e.count,r=e.value,i=Number(r),c=Math.abs(o),d=l.useState(i),u=Object(p.a)(d,2),b=u[0],m=u[1],j=l.useState(c),v=Object(p.a)(j,2),f=v[0],x=v[1],y=function(){m(i),x(c)};if(l.useEffect((function(){var e=setTimeout((function(){y()}),1e3);return function(){clearTimeout(e)}}),[i]),b===i||Number.isNaN(i)||Number.isNaN(b))t=[l.createElement(h,Object(a.a)({},e,{key:i,current:!0}))],n={transition:"none"};else{t=[];for(var g=i+10,S=[],w=i;w<=g;w+=1)S.push(w);var I=S.findIndex((function(e){return e%10===b}));t=S.map((function(t,n){var s=t%10;return l.createElement(h,Object(a.a)({},e,{key:t,value:s,offset:n-I,current:n===I}))})),n={transform:"translateY(".concat(-O(b,i,f<c?1:-1),"00%)")}}return l.createElement("span",{className:"".concat(s,"-only"),style:n,onTransitionEnd:y},t)}var f=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(n[s[o]]=e[s[o]])}return n},x=function(e){var t=e.prefixCls,n=e.count,s=e.className,o=e.motionClassName,r=e.style,c=e.title,b=e.show,m=e.component,j=void 0===m?"sup":m,p=e.children,h=f(e,["prefixCls","count","className","motionClassName","style","title","show","component","children"]),O=(0,l.useContext(d.b).getPrefixCls)("scroll-number",t),x=Object(a.a)(Object(a.a)({},h),{"data-show":b,style:r,className:i()(O,s,o),title:c}),y=n;if(n&&Number(n)%1===0){var g=String(n).split("");y=g.map((function(e,t){return l.createElement(v,{prefixCls:O,count:Number(n),value:e,key:g.length-t})}))}return r&&r.borderColor&&(x.style=Object(a.a)(Object(a.a)({},r),{boxShadow:"0 0 0 1px ".concat(r.borderColor," inset")})),p?Object(u.a)(p,(function(e){return{className:i()("".concat(O,"-custom-component"),null===e||void 0===e?void 0:e.className,o)}})):l.createElement(j,x,y)},y=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(n[s[o]]=e[s[o]])}return n},g=function(e){var t,n,r=e.prefixCls,b=e.scrollNumberPrefixCls,j=e.children,p=e.status,h=e.text,O=e.color,v=e.count,f=void 0===v?null:v,g=e.overflowCount,S=void 0===g?99:g,w=e.dot,I=void 0!==w&&w,C=e.size,k=void 0===C?"default":C,N=e.title,T=e.offset,P=e.style,D=e.className,A=e.showZero,R=void 0!==A&&A,E=y(e,["prefixCls","scrollNumberPrefixCls","children","status","text","color","count","overflowCount","dot","size","title","offset","style","className","showZero"]),z=l.useContext(d.b),M=z.getPrefixCls,F=z.direction,K=M("badge",r),L=f>S?"".concat(S,"+"):f,_=null!==p&&void 0!==p||null!==O&&void 0!==O,B="0"===L||0===L,V=I&&!B,J=V?"":L,W=Object(l.useMemo)((function(){return(null===J||void 0===J||""===J||B&&!R)&&!V}),[J,B,R,V]),U=Object(l.useRef)(f);W||(U.current=f);var Y=U.current,$=Object(l.useRef)(J);W||($.current=J);var Q=$.current,H=Object(l.useRef)(V);W||(H.current=V);var q=Object(l.useMemo)((function(){if(!T)return Object(a.a)({},P);var e={marginTop:T[1]};return"rtl"===F?e.left=parseInt(T[0],10):e.right=-parseInt(T[0],10),Object(a.a)(Object(a.a)({},e),P)}),[F,T,P]),Z=null!==N&&void 0!==N?N:"string"===typeof Y||"number"===typeof Y?Y:void 0,X=W||!h?null:l.createElement("span",{className:"".concat(K,"-status-text")},h),G=Y&&"object"===Object(o.a)(Y)?Object(u.a)(Y,(function(e){return{style:Object(a.a)(Object(a.a)({},q),e.style)}})):void 0,ee=i()((t={},Object(s.a)(t,"".concat(K,"-status-dot"),_),Object(s.a)(t,"".concat(K,"-status-").concat(p),!!p),Object(s.a)(t,"".concat(K,"-status-").concat(O),m(O)),t)),te={};O&&!m(O)&&(te.background=O);var ne=i()(K,(n={},Object(s.a)(n,"".concat(K,"-status"),_),Object(s.a)(n,"".concat(K,"-not-a-wrapper"),!j),Object(s.a)(n,"".concat(K,"-rtl"),"rtl"===F),n),D);if(!j&&_){var se=q.color;return l.createElement("span",Object(a.a)({},E,{className:ne,style:q}),l.createElement("span",{className:ee,style:te}),l.createElement("span",{style:{color:se},className:"".concat(K,"-status-text")},h))}return l.createElement("span",Object(a.a)({},E,{className:ne}),j,l.createElement(c.default,{visible:!W,motionName:"".concat(K,"-zoom"),motionAppear:!1,motionDeadline:1e3},(function(e){var t,n=e.className,o=M("scroll-number",b),r=H.current,c=i()((t={},Object(s.a)(t,"".concat(K,"-dot"),r),Object(s.a)(t,"".concat(K,"-count"),!r),Object(s.a)(t,"".concat(K,"-count-sm"),"small"===k),Object(s.a)(t,"".concat(K,"-multiple-words"),!r&&Q&&Q.toString().length>1),Object(s.a)(t,"".concat(K,"-status-").concat(p),!!p),Object(s.a)(t,"".concat(K,"-status-").concat(O),m(O)),t)),d=Object(a.a)({},q);return O&&!m(O)&&((d=d||{}).background=O),l.createElement(x,{prefixCls:o,show:!W,motionClassName:n,className:c,count:Q,title:Z,style:d,key:"scrollNumber"},G)})),X)};g.Ribbon=j;t.a=g},1095:function(e,t){},1176:function(e,t,n){"use strict";var s=n(0),o=n(60),a=n(97),r=n(1219),i=n.n(r),c=n(5);class l extends s.Component{constructor(){super(...arguments),this.handleExportAll=(e,t,n)=>{const s=t.map((t=>Object.keys(t).reduce(((n,s)=>(n[e[s]||s]=t[s],n)),{}))),o=i.a.utils.json_to_sheet(s);this.openDownloadDialog(this.sheet2blob(o,void 0),n+".xlsx")},this.handleExportAllJson=(e,t)=>{const n=i.a.utils.json_to_sheet(e);this.openDownloadDialog(this.sheet2blob(n,void 0),t+".xlsx")},this.openDownloadDialog=(e,t)=>{"object"===typeof e&&e instanceof Blob&&(e=URL.createObjectURL(e));var n,s=document.createElement("a");s.href=e,s.download=t||"",window.MouseEvent?n=new MouseEvent("click"):(n=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),s.dispatchEvent(n)},this.sheet2blob=(e,t)=>{let n={SheetNames:[t=t||"sheet1"],Sheets:{}};n.Sheets[t]=e;let s=i.a.write(n,{bookType:"xlsx",bookSST:!1,type:"binary"});return new Blob([function(e){let t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let s=0;s!==e.length;++s)n[s]=255&e.charCodeAt(s);return t}(s)],{type:"application/octet-stream"})}}render(){return Object(c.jsx)(o.a,{type:this.props.ButtonType,...this.props.ButtonProps,onClick:()=>{if(void 0!==this.props.getJson)this.props.getJson().then((e=>{this.handleExportAllJson(e,this.props.fileName)})).catch((e=>{a.b.error(e)}));else{const e=this.props.nowData(),t=this.props.colMap(e);this.handleExportAll(t,e,this.props.fileName)}},children:this.props.ButtonText})}}t.a=l},1220:function(e,t){},1221:function(e,t){},1224:function(e,t,n){},1265:function(e,t,n){"use strict";var s=n(67);t.a=e=>Object(s.c)(e)?0:e.toString().length>6?e.toFixed(2):e},1313:function(e,t,n){"use strict";var s=n(0),o=n(972),a=n(973),r=n(123),i=n(61),c=(n(1224),n(40)),l=n(1015),d=n(5);const u=e=>{const t=String.fromCharCode("A".charCodeAt(0)+e.index);let n="";return n=-1!==e.answer_m.indexOf(t)?"used":-1!==e.mark.indexOf(t)?"unused":"init",Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{onContextMenu:()=>{e.onMark&&e.onMark(t)},onClick:()=>{e.onAnswerM&&e.onAnswerM(t)},className:"Options-"+n+" Options-".concat(-1!==e.answer.indexOf(t)?"green":""),children:Object(d.jsxs)(o.a,{children:[Object(d.jsx)(a.a,{span:1,children:[""].map((()=>"used"===n?Object(d.jsx)(r.a,{}):"unused"===n?Object(d.jsx)(i.a,{}):void 0))}),Object(d.jsxs)(a.a,{className:"Options-Choice",span:1,children:[t,"."]}),Object(d.jsx)(a.a,{className:"Options-content",span:22,children:Object(d.jsx)(l.a,{id:"Options-content-id-"+e.key_o,text:e.content})})]})})})};t.a=Object(c.e)((e=>{var t,n;const[o,a]=Object(s.useState)(e.answerSheet);Object(s.useEffect)((()=>{void 0!==e.answerSheet?a(e.answerSheet):r()}),[e.key_o]);const r=()=>{e.getAS&&e.getAS().then((e=>{a(e)}))};return Object(d.jsxs)("div",{className:"Choice",children:[Object(d.jsx)("div",{className:"Choice-title",children:Object(d.jsx)(l.a,{id:"Choice-title-id"+e.key_o,text:null===(t=e.problemInfo)||void 0===t?void 0:t.description})}),void 0!==(null===(n=e.problemInfo)||void 0===n?void 0:n.choice)&&e.problemInfo.choice.map(((t,n)=>{var s,a,i;return Object(d.jsx)(u,{onMark:t=>{e.onMark&&e.onMark(t).then((()=>{r()}))},onAnswerM:t=>{e.onAnswerM&&e.onAnswerM(t).then((()=>{r()}))},mark:null!==(s=null===o||void 0===o?void 0:o.mark)&&void 0!==s?s:[],answer:null!==(a=null===o||void 0===o?void 0:o.answer)&&void 0!==a?a:[],answer_m:null!==(i=null===o||void 0===o?void 0:o.answer_m)&&void 0!==i?i:[],index:n,content:t,key_o:e.key_o+"-"+n.toString()})}))]})}))},1314:function(e,t,n){},1315:function(e,t,n){"use strict";var s=n(975),o=n(60),a=n(83),r=n(1015),i=n(0),c=n(5);t.a=e=>{var t,n,l;const[d,u]=Object(i.useState)(240),[b,m]=Object(i.useState)(!1);return Object(i.useEffect)((()=>{u(240)}),[e.description,e.answer]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{children:Object(c.jsx)(s.a,{title:Object(c.jsx)(a.a,{level:5,children:" \u539f\u95ee\u9898 "}),style:{marginTop:24},extra:Object(c.jsx)(o.a,{type:"default",onClick:()=>{u(998244353===d?240:998244353)},children:998244353===d?"\u6536\u9f50\u5168\u6587":"\u5c55\u5f00\u5168\u6587"}),children:Object(c.jsx)(r.a,{id:"proDescription",text:(null!==(t=null===e||void 0===e?void 0:e.description)&&void 0!==t?t:"").substr(0,d)})})}),Object(c.jsxs)(s.a,{title:Object(c.jsx)(a.a,{level:5,children:" \u5b66\u751f\u7b54\u6848 "}),style:{marginTop:24},extra:Object(c.jsx)(o.a,{type:"default",onClick:()=>{m(!b)},children:b?"\u663e\u793a\u6e32\u67d3":"\u663e\u793a\u539f\u6587"}),children:[b&&Object(c.jsx)("pre",{children:null===e||void 0===e||null===(n=e.answer)||void 0===n?void 0:n[0]}),!b&&Object(c.jsx)(r.a,{id:"userAnswer",text:null===e||void 0===e||null===(l=e.answer)||void 0===l?void 0:l[0]})]})]})}},1370:function(e,t,n){"use strict";var s=n(1),o=n(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M764 280.9c-14-30.6-33.9-58.1-59.3-81.6C653.1 151.4 584.6 125 512 125s-141.1 26.4-192.7 74.2c-25.4 23.6-45.3 51-59.3 81.7-14.6 32-22 65.9-22 100.9v27c0 6.2 5 11.2 11.2 11.2h54c6.2 0 11.2-5 11.2-11.2v-27c0-99.5 88.6-180.4 197.6-180.4s197.6 80.9 197.6 180.4c0 40.8-14.5 79.2-42 111.2-27.2 31.7-65.6 54.4-108.1 64-24.3 5.5-46.2 19.2-61.7 38.8a110.85 110.85 0 00-23.9 68.6v31.4c0 6.2 5 11.2 11.2 11.2h54c6.2 0 11.2-5 11.2-11.2v-31.4c0-15.7 10.9-29.5 26-32.9 58.4-13.2 111.4-44.7 149.3-88.7 19.1-22.3 34-47.1 44.3-74 10.7-27.9 16.1-57.2 16.1-87 0-35-7.4-69-22-100.9zM512 787c-30.9 0-56 25.1-56 56s25.1 56 56 56 56-25.1 56-56-25.1-56-56-56z"}}]},name:"question",theme:"outlined"},r=n(12),i=function(e,t){return o.createElement(r.a,Object(s.a)(Object(s.a)({},e),{},{ref:t,icon:a}))};i.displayName="QuestionOutlined";t.a=o.forwardRef(i)},1406:function(e,t,n){"use strict";n.r(t);var s=n(298),o=n(40),a=n(97),r=n(1050),i=n(966),c=n(970),l=n(968),d=n(974),u=n(0),b=n(66),m=(n(1314),n(100)),j=n(123),p=n(1370),h=n(1265),O=n(243),v=n(1176),f=n(67);var x=async e=>{const t=a.b.loading({content:"\u5bfc\u51fa\u5185\u5bb9\u8f83\u591a\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85",duration:0});return m.a.getProblemSummary({psid:e,code:1}).then((e=>{const n=e.data;let s=[];for(const t of n){var o,a;if("sducs"===t.username||"superadmin"===t.username)continue;let e={"\u6392\u540d":t.rank,"\u59d3\u540d":t.nickname,"\u5b66\u53f7":t.username,"\u603b\u5206":t.sum_score,"ip\u6570\u91cf":null===(o=t.ips)||void 0===o?void 0:o.length,"ip\u5730\u5740":null===(a=t.ips)||void 0===a?void 0:a.toString(),"\u4ea4\u5377\u65f6\u95f4":Object(f.c)(t.finish_time)?"":Object(O.e)(t.finish_time)};for(const n in t)-1!==n.indexOf("-")&&(e[n+"-\u5206\u6570"]=t[n].s,Object(f.c)(t[n].code)||(e[n+"-\u4ee3\u7801"]=t[n].code.substr(0,32766)));s.push(e)}return t(),Promise.resolve(s)}))},y=n(1019),g=n(1315),S=n(1313),w=n(5);t.default=Object(b.b)((e=>({minWidth:e.ContestReducer.minWidth})),(e=>({setMinWidth:t=>e({type:"setMinWidth",data:t})})))(Object(s.a)()(Object(o.e)((e=>{const t=e.match.params.problemSetId,[n,s]=Object(u.useState)(),[o,b]=Object(u.useState)(),[f,I]=Object(u.useState)(),[C,k]=Object(u.useState)(!1),[N,T]=Object(u.useState)({});Object(u.useEffect)((()=>{if(void 0===n){const e=a.b.loading({content:"\u699c\u5355\u4fe1\u606f\u5185\u5bb9\u8f83\u591a\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85",duration:0});m.a.getProblemSummary({psid:t,code:0}).then((e=>{s(e.data),b(e.lastUpdate),I(e.info)})).finally((()=>{e()}))}}),[n,s]);const P=[];let D=330;if(void 0!==f){for(const e of f.groupInfo){const n=()=>0===e.type?"\u5ba2\u89c2\u9898":1===e.type?"\u4e3b\u89c2\u9898":2===e.type?"\u7f16\u7a0b\u9898":void 0,s={title:Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{children:"\u9898\u7ec4".concat(e.index+1," - ").concat(e.name)}),Object(w.jsx)("div",{children:"".concat(n())})]}),children:[]};for(const o of e.problemInfo)s.children.push({title:Object(w.jsx)("div",{className:"ProHeader",children:Object(w.jsx)("div",{children:Object(w.jsxs)("span",{style:{fontWeight:"bold"},children:["\u9898\u76ee ",o.index+1]})})}),dataIndex:"".concat(e.index+1,"-").concat(o.index+1),width:70,render:(n,s)=>{if(n.h){const i=n.j?Object(w.jsx)(j.a,{style:{color:"#52c41a"}}):Object(w.jsx)(p.a,{style:{color:"#faad14"}});return Object(w.jsx)("div",{onClick:()=>{k(!0);let n=f.groupInfo[e.index].type;if(0===n||1===n){const r=a.b.loading({content:"\u52a0\u8f7d\u4e2d",duration:0});m.a.getProblemSetProPreview({psid:t,gid:e.index,pid:o.index,username:s.username}).then((t=>{0===n&&T({type:0,problemInfo:t.problemInfo,answerSheet:{answer_m:t.answerSheet.answer,answer:t.problemInfo.answer,mark:t.answerSheet.mark},key_o:"".concat(e.index+1,"-").concat(o.index+1)}),1===n&&T({type:1,description:t.problemInfo.description,answer:t.answerSheet.answer})})).finally((()=>{r()}))}else 2===n&&T({type:2,username:s.username,router:{psid:t,gid:e.index,pid:o.index},router_submission:{psid:t,gid:-1,pid:-1},proName:"\u9898\u7ec4".concat(e.index+1," - ").concat(e.name)})},children:Object(w.jsx)(r.a,{count:i,offset:[15,-3],children:Object(w.jsx)("span",{style:{fontWeight:"bold"},children:Object(h.a)(n.s)})})})}}}),D+=70;P.push(s)}e.minWidth!==D&&e.setMinWidth(D)}const A=[];return 1===(null===f||void 0===f?void 0:f.type)&&(A.push({title:"\u72b6\u6001",width:150,render:(e,t)=>{var n,s,o;return Object(w.jsxs)("div",{style:{paddingLeft:10,paddingRight:10},children:[Object(w.jsx)("span",{style:{float:"left"},children:1===t.finish&&Object(w.jsx)(i.a,{content:Object(w.jsx)(w.Fragment,{children:Object(O.e)(t.finish_time)}),title:"\u4ea4\u5377\u65f6\u95f4",children:Object(w.jsx)(c.a,{color:"red",children:"\u4ea4\u5377"})})}),Object(w.jsxs)("span",{style:{float:"right",textAlign:"right"},children:[(null===(n=t.ips)||void 0===n?void 0:n.length)<=1&&Object(w.jsx)(c.a,{color:"green",children:"Ip\u6b63\u5e38"}),(null===(s=t.ips)||void 0===s?void 0:s.length)>1&&Object(w.jsx)(i.a,{content:Object(w.jsx)(w.Fragment,{children:null===(o=t.ips)||void 0===o?void 0:o.map((e=>Object(w.jsx)("div",{children:e})))}),title:"\u4f7f\u7528Ip",children:Object(w.jsx)(c.a,{color:"orange",children:"Ip\u5f02\u5e38"})})]})]})}}),D+=150),Object(w.jsxs)("div",{style:{marginTop:24},children:[Object(w.jsxs)(l.a,{width:1250,visible:C,footer:!1,destroyOnClose:!0,onCancel:()=>{k(!1)},children:[0===N.type&&Object(w.jsx)(S.a,{problemInfo:null===N||void 0===N?void 0:N.problemInfo,answerSheet:null===N||void 0===N?void 0:N.answerSheet,key_o:null===N||void 0===N?void 0:N.key_o}),1===N.type&&Object(w.jsx)(g.a,{description:null===N||void 0===N?void 0:N.description,answer:null===N||void 0===N?void 0:N.answer}),2===N.type&&Object(w.jsx)(y.a,{btnText:"\u8bb0\u5f55-"+N.username+"-"+N.proName,name:"Contest-Rank-SubmissionList-"+N.username+"-"+N.proName,API:async e=>m.a.getProblemSetSubmissionList({...e,router:N.router,username:N.username,problemSetId:N.router.psid}),QuerySubmissionAPI:async e=>m.a.getProblemSetSubmissionInfo({...N.router_submission,submissionId:e})})]}),Object(w.jsxs)("div",{style:{fontWeight:"lighter",marginBottom:16,marginLeft:4},children:["\u699c\u5355\u66f4\u65b0\u6709\u5927\u7ea61\u5206\u949f\u7684\u5ef6\u8fdf\uff0c\u4e0a\u6b21\u66f4\u65b0\u65f6\u95f4\uff1a",o?Object(O.e)(o):void 0,Object(w.jsx)("div",{style:{float:"right"},children:Object(w.jsx)(v.a,{ButtonProps:{},ButtonText:"\u5bfc\u51fa\u6210\u7ee9",ButtonType:"default",getJson:()=>x(t),fileName:(null===f||void 0===f?void 0:f.name)+"_"+Date.now()+"_\u7ed3\u679c\u5bfc\u51fa"})})]}),Object(w.jsx)(d.a,{className:"RankTable",style:{width:D,minWidth:D},pagination:!1,bordered:!0,dataSource:n,rowClassName:()=>"rowBase",columns:[{title:"\u6392\u540d",dataIndex:"rank",width:80,render:e=>Object(w.jsxs)("span",{className:"center",children:[" ",e," "]})},{title:"\u53c2\u8d5b\u4eba",width:150,render:(e,t)=>Object(w.jsx)("div",{style:{paddingLeft:10,paddingRight:10},children:Object(w.jsxs)("span",{style:{float:"right",textAlign:"right"},children:[Object(w.jsx)("div",{style:{fontWeight:"bold"},children:t.username}),Object(w.jsx)("div",{style:{color:"grey",fontSize:12},children:t.nickname})]})})},...A,{title:"\u603b\u5206",width:100,render:(e,t)=>Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("span",{children:Object(h.a)(t.sum_score)})})},...P]})]})}))))}}]);
//# sourceMappingURL=37.e371cc9e.chunk.js.map