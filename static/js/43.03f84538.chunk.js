(this.webpackJsonpsduoj=this.webpackJsonpsduoj||[]).push([[43],{1004:function(e,t,s){"use strict";var a=s(975),n=s(299),r=s(965),o=s(60),i=s(1085),c=s(974),l=s(0),d=s(87),m=s(66),u=s(298),b=s(40),j=s(302),p=s(67),h=s(292),O=s(5);t.a=Object(m.b)((e=>{var t;const s=e.UserReducer,a=e.TableReduce;return{roles:null===(t=s.userInfo)||void 0===t?void 0:t.roles,tableData:{...a.tableData}}}),(e=>({setTableInfo:(t,s)=>e({type:"setTableInfo",name:t,data:s}),setDataSource:(t,s)=>e({type:"setDataSource",data:t,name:s,add:!1})})))(Object(u.a)()(Object(b.e)((e=>{var t,s;const[m,u]=Object(l.useState)(0),[b,f]=Object(l.useState)(),[g,v]=Object(l.useState)(!0),[x,S]=Object(l.useState)(1),[y,w]=Object(l.useState)(Object(p.a)(e.defaultPageSize,d.h)),[I,C]=Object(l.useState)(),[T,k]=Object(l.useState)(0),N=t=>{f(t),void 0!==e.setDataSource&&void 0!==e.name&&e.setDataSource(t,e.name)},R=(t,s,a,n)=>{var r,o,i,c,l;const d=null===(r=e.tableData[e.name])||void 0===r?void 0:r.tableInfo;var m,b,j,p;void 0!==d&&(void 0===n&&void 0!==d.moreProps&&z.setFieldsValue(d.moreProps),t=null!==(m=t)&&void 0!==m?m:d.pageNow,s=null!==(b=s)&&void 0!==b?b:d.pageSize,a=null!==(j=a)&&void 0!==j?j:d.searchKey,n=null!==(p=n)&&void 0!==p?p:d.moreProps);let h=null!==(o=t)&&void 0!==o?o:x,O=null!==(i=s)&&void 0!==i?i:y,f=null!==(c=a)&&void 0!==c?c:I,g=null!==(l=n)&&void 0!==l?l:z.getFieldsValue();S(h),w(O),C(f),v(!0),e.API({pageNow:h,pageSize:O,searchKey:f,...g}).then((t=>{null===t.rows&&(t.rows=[]),void 0!==e.APIRowsTransForm?N(e.APIRowsTransForm(t.rows)):N(t.rows),void 0!==t.totalNum&&"0"!==t.totalNum?(u(t.totalNum),e.name&&e.setTableInfo(e.name,{total:t.totalNum,pageNow:h,pageSize:O,searchKey:f,moreProps:g})):(u(O*t.totalPage),e.name&&e.setTableInfo(e.name,{total:O*t.totalPage,pageNow:h,pageSize:O,searchKey:f,moreProps:g})),v(!1)}))};Object(l.useEffect)((()=>{z.setFieldsValue(e.initRequestProps),R()}),[e.name]);const[z]=Object(h.a)(),A=()=>{const e=z.getFieldsValue();"{}"!==JSON.stringify(e)&&R(1,y,void 0,e)},D=()=>{var t;const s=z.getFieldsValue();z.resetFields();const a=null===(t=e.tableData[e.name])||void 0===t?void 0:t.tableInfo;e.name&&e.setTableInfo(e.name,{total:a.total,pageNow:a.pageNow,pageSize:a.pageSize,searchKey:a.searchKey,moreProps:void 0});const n=z.getFieldsValue();JSON.stringify(s)!==JSON.stringify(n)&&R(1,y,void 0,void 0)};return Object(l.useEffect)((()=>{var t;const s=null===(t=e.tableData[e.name])||void 0===t?void 0:t.tableVersion;if(void 0!==s&&T!==s)if(s<0){var a;k(-s),f(null===(a=e.tableData[e.name])||void 0===a?void 0:a.dataSource)}else{k(s);const e=z.getFieldsValue();R(x,y,I,e)}}),[e.tableData,T]),Object(O.jsxs)(O.Fragment,{children:[e.useList&&Object(O.jsx)(a.a,{title:e.title,bordered:!0,size:"default",className:null!==(t=e.cardProps)&&void 0!==t?t:"zeroBodyPaddingLeft",extra:(!0===e.search||void 0!==e.getForm)&&Object(O.jsxs)(O.Fragment,{children:[!0===e.search&&Object(O.jsx)(j.a,{placeholder:e.t("searchUser"),onSearch:e=>{C(e),S(1);const t=z.getFieldsValue();R(1,y,e,t)},enterButton:!0,style:{width:300}},"search"),void 0!==e.getForm&&Object(O.jsxs)(n.a,{form:z,children:[e.getForm(A),e.useFormBtn&&Object(O.jsxs)(r.b,{style:{marginLeft:"30px"},size:20,children:[Object(O.jsx)(o.a,{type:"primary",onClick:A,children:"\u7b5b\u9009"}),Object(O.jsx)(o.a,{htmlType:"button",onClick:D,children:"\u91cd\u7f6e"})]})]})]}),children:Object(O.jsx)(i.b,{grid:e.grid,itemLayout:"vertical",loading:g,size:e.size,dataSource:b,renderItem:e.renderItem,pagination:{onChange:(e,t)=>{R(e,t)},current:x,pageSize:y,total:m,size:"small",hideOnSinglePage:!0,showQuickJumper:!0,showLessItems:!0,showSizeChanger:Object(p.a)(e.showSizeChanger,!0),pageSizeOptions:["5","15","20","50","80"]}})}),!e.useList&&Object(O.jsx)(a.a,{bordered:!1,size:"small",extra:(!0===e.search||void 0!==e.getForm)&&Object(O.jsxs)(O.Fragment,{children:[!0===e.search&&Object(O.jsx)(j.a,{placeholder:"\u641c\u7d22",onSearch:e=>{C(e),S(1),R(1,y,e)},enterButton:!0,style:{width:300}},"search"),void 0!==e.getForm&&Object(O.jsxs)(n.a,{form:z,children:[e.getForm(A),Object(O.jsxs)(r.b,{style:{marginLeft:"30px"},size:20,children:[Object(O.jsx)(o.a,{type:"primary",onClick:A,children:e.t("filtering")}),Object(O.jsx)(o.a,{htmlType:"button",onClick:D,children:e.t("Reset")})]})]})]}),children:Object(O.jsx)(c.a,{rowKey:e.rowKey,loading:g,size:e.size,columns:e.columns,rowSelection:e.rowSelection,dataSource:b,pagination:null!==(s=e.pagination)&&void 0!==s?s:{onChange:(e,t)=>{R(e,t)},current:x,pageSize:y,total:m,hideOnSinglePage:!1,showQuickJumper:!0,showLessItems:!0,showSizeChanger:Object(p.a)(e.showSizeChanger,!0),pageSizeOptions:["5","15","20","50","80"]}})})]})}))))},1019:function(e,t,s){"use strict";var a=s(298),n=s(74),r=s(60),o=s(965),i=s(299),c=s(178),l=s(166),d=s(975),m=s(97),u=s(309),b=s(100),j=s(964),p=s(35),h=s(103),O=s(0),f=s(127),g=s.n(f),v=s(1028),x=s(187),S=s(66),y=s(40),w=s(67),I=s(185),C=s(1031),T=s(5);t.a=Object(S.b)((e=>{var t;const s=e.TableReduce,a=e.UserReducer;return{tableData:s.tableData,roles:null===(t=a.userInfo)||void 0===t?void 0:t.roles,isLogin:a.isLogin}}),(e=>({addTableVersion:t=>e({type:"addTableVersion",name:t}),setSelectedRowKeys:(t,s)=>e({type:"setSelectedRowKeys",data:t,name:s}),setDataSource:(t,s)=>e({type:"setDataSource",data:t,name:s,add:!0}),setTopSubmission:(t,s)=>e({type:"setTopSubmission",submissionID:t,submissionInfo:s}),setSubmissionModalVis:t=>e({type:"setSubmissionModalVis",data:t})})))(Object(a.a)()(Object(y.e)((e=>{var t,s;const[a,f]=Object(O.useState)(!1),[S,y]=Object(O.useState)([]),[k,N]=Object(O.useState)(!1),R=Object(w.a)(null===(t=e.tableData[e.name])||void 0===t?void 0:t.selectedRowKeys,[]),z=Object(w.a)(null===(s=e.tableData[e.name])||void 0===s?void 0:s.dataSource,[]),A=t=>{e.setTopSubmission(t.submissionId,{title:t.problemTitle,TimeLimit:t.timeLimit,MemoryLimit:t.memoryLimit,scoreMod:void 0===t.sumScore?"disable":"show",sumScore:t.sumScore,testcaseMod:"show",QuerySubmissionAPI:e.QuerySubmissionAPI}),e.setSubmissionModalVis(!0)},D=[{title:e.t("results"),dataIndex:"result",key:"result",render:(e,t)=>Object(T.jsx)("div",{style:{cursor:"pointer"},onClick:()=>{A(t)},children:Object(T.jsx)(h.a,{type:"text",caseType:p.b.indexOf(p.c[e]),append:"-2"===e?"("+t.RunningStep+"/"+(t.checkpointNum+t.publicCheckpointNum)+")":""})})},{title:e.t("score"),dataIndex:"score",key:"score",render:(e,t)=>void 0===t.sumScore?e:Math.floor(e/t.sumScore*100)+"%"},{title:e.t("submissionTime"),dataIndex:"submitTime",key:"submitTime",render:e=>Object(T.jsx)(n.a,{title:g()(e).format("YYYY-MM-DD HH:mm:ss"),children:Object(T.jsx)("span",{children:g()(e).fromNow()})})}],M=[{title:"ID",dataIndex:"submissionId",key:"submissionId",render:(e,t)=>Object(T.jsx)(r.a,{type:"link",size:"small",onClick:()=>{A(t)},children:e})},{title:e.t("username"),dataIndex:"username",key:"username"},{title:e.t("problemNo."),dataIndex:"problemCode",key:"problemCode",render:e.problemCodeRender},{title:e.t("problemName"),dataIndex:"problemTitle",key:"problemTitle"},{title:e.t("results"),dataIndex:"result",key:"result",width:170,render:(e,t)=>Object(T.jsx)("div",{style:{cursor:"pointer"},onClick:()=>{A(t)},children:Object(T.jsx)(h.a,{type:"text",caseType:p.b.indexOf(p.c[e]),append:"-2"===e?"("+t.RunningStep+"/"+(t.checkpointNum+t.publicCheckpointNum)+")":""})})},{title:e.t("score"),dataIndex:"score",key:"score",render:(e,t)=>void 0===t.sumScore?e:Math.floor(e/t.sumScore*100)+"%"},{title:e.t("template"),dataIndex:"judgeTemplateTitle",key:"judgeTemplateTitle"},{title:e.t("memoryUsage"),dataIndex:"usedMemory",key:"usedMemory",render:e=>e+" KB"},{title:e.t("timeUsage"),dataIndex:"usedTime",key:"usedTime",render:e=>e+" ms"},{title:e.t("submissionTime"),dataIndex:"submitTime",key:"submitTime",render:e=>Object(T.jsx)(n.a,{title:g()(e).format("YYYY-MM-DD HH:mm:ss"),children:Object(T.jsx)("span",{children:g()(e).fromNow()})})}];return Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(d.a,{title:Object(T.jsxs)(o.b,{children:[void 0!==e.title?e.title:e.t("submissionRecord"),Object(T.jsx)(u.a,{open:a,dataHandle:t=>{const s=t[0],a=(t[1],t[2]),n=t[3],r=(t[4],t[5]),o=t[6],i=t[7],c=t[8];let l=z;const d=l.findIndex((e=>e.submissionId===s));if(-1!==d){if(n<0){l[d].result=n.toString(),-1===n&&(l[d].result=r,l[d].score=o,l[d].usedTime=i,l[d].usedMemory=c);let e=0;for(const t of l)parseInt(t.result)<=0&&(e+=1);0===e&&f(!1)}else{let e=0;0===a?e=n+1:1===a&&(e=l[d].checkpointNum+n+1),l[d].RunningStep<e&&(l[d].RunningStep=e,l[d].score+=o)}e.setDataSource(l,e.name)}},queryList:S})]}),style:e.lessInfo?{}:{minWidth:1200},className:e.lessInfo?"smallBodyPadding":"",extra:Object(T.jsxs)(o.b,{children:[!0!==e.lessInfo&&Object(I.a)(e.roles,["admin","superadmin"])&&Object(T.jsx)(x.a,{API:b.a.rejudge,data:R,afterSuccess:()=>{e.addTableVersion(e.name),e.setSelectedRowKeys([],e.name)}}),Object(T.jsx)(r.a,{icon:Object(T.jsx)(j.a,{}),onClick:()=>{N(!0),e.addTableVersion(e.name),m.b.success(e.t("refreshSuccessfully")),setTimeout((()=>{N(!1)}),3e3)},disabled:k,children:e.t("refresh")})]}),actions:e.lessInfo&&e.isLogin?[Object(T.jsx)("div",{children:e.lessInfo&&e.isLogin&&Object(T.jsx)(C.a,{btnProps:{type:"text",block:!0},btnText:e.t("ShowAllInformation"),name:"Pro-SubmissionList-"+e.name,API:e.API,QuerySubmissionAPI:e.QuerySubmissionAPI})})]:void 0,children:Object(T.jsx)(v.a,{disableSelection:e.lessInfo||!Object(I.a)(e.roles,["admin","superadmin"]),defaultPageSize:e.lessInfo?5:void 0,showSizeChanger:!e.lessInfo&&void 0,pagination:!e.lessInfo&&void 0,columns:e.lessInfo?D:M,getForm:!0===e.useForm?t=>Object(T.jsxs)(o.b,{size:30,children:[Object(T.jsx)(i.a.Item,{label:e.t("username"),name:"username",children:Object(T.jsx)(c.a,{onPressEnter:e=>{t()},allowClear:!0})}),Object(T.jsx)(i.a.Item,{label:e.t("problemNo."),name:"problemCode",children:Object(T.jsx)(c.a,{onPressEnter:e=>{t()},allowClear:!0})}),Object(T.jsx)(i.a.Item,{label:e.t("JudgeResult"),name:"judgeResult",children:Object(T.jsx)(l.a,{onChange:t,allowClear:!0,style:{width:200},children:p.a.map((e=>Object(T.jsx)(l.a.Option,{value:parseInt(e),children:Object(T.jsx)(h.a,{type:"text",caseType:p.b.indexOf(p.c[e])})})))})})]}):void 0,name:e.name,size:"small",rowKey:"submissionId",API:t=>{if("problemCode"in t&&!Object(w.c)(t.problemCode)){let e=t.problemCode;1===e.length?(null!==e.match(/^[a-z]$/)&&(e=(e.charCodeAt(0)-"a".charCodeAt(0)+1).toString()),null!==e.match(/^[A-Z]$/)&&(e=(e.charCodeAt(0)-"A".charCodeAt(0)+1).toString())):null!==e.match(/^[0-9]{4}$/)&&(e="SDUOJ-"+e),t.problemCode=e}return e.API(t)},APIRowsTransForm:e=>{Object(w.c)(e)&&(e=[]);let t=[],s=[];for(const a of e)a.judgeResult<=0&&t.push(a.submissionId),s.push({...a,score:a.judgeScore,RunningStep:0,result:a.judgeResult.toString(),sumScore:a.sumScore,submitTime:parseInt(a.gmtCreate)});return 0!==t.length&&(f(!0),y(t)),s}})})})}))))},1026:function(e,t,s){"use strict";var a=s(974),n=s(0),r=s.n(n),o=s(66),i=s(298),c=s(40),l=s(1049),d=s(1432),m=s(1048),u=s(5);t.a=r.a.memo(Object(o.b)((e=>({tableData:{...e.TableReduce.tableData}})),(e=>({setTableInfo:(t,s)=>e({type:"setTableInfo",name:t,data:s}),setDataSource:(t,s)=>e({type:"setDataSource",data:t,name:s,add:!1})})))(Object(i.a)()(Object(c.e)((e=>{const[t,s]=Object(n.useState)([]),[r,o]=Object(n.useState)(!0),[i,c]=Object(n.useState)(0),b=t=>{s(t),void 0!==e.setDataSource&&void 0!==e.name&&e.setDataSource(t,e.name)},j=()=>{o(!0),e.API().then((t=>{null===t&&(t=[]),void 0!==e.APIRowsTransForm?b(e.APIRowsTransForm(t)):b(t),o(!1)}))};Object(n.useEffect)((()=>{j()}),[e.name]),Object(n.useEffect)((()=>{var t;const a=null===(t=e.tableData[e.name])||void 0===t?void 0:t.tableVersion;var n;void 0!==a&&i!==a&&(a<0?(c(-a),s(null===(n=e.tableData[e.name])||void 0===n?void 0:n.dataSource)):(c(a),j()))}),[e.tableData,i]);const p=Object(l.c)((()=>Object(u.jsx)(d.a,{style:{cursor:"grab",color:"#999"}}))),h=Object(l.b)((e=>Object(u.jsx)("tr",{...e}))),O=Object(l.a)((e=>Object(u.jsx)("tbody",{...e}))),f=s=>{let{oldIndex:a,newIndex:n}=s;a!==n&&(b(Object(m.a)(t,a,n)),e.afterDrag&&e.afterDrag(t,a,n))},g=[{title:"",dataIndex:"sort",width:50,className:"drag-visable",render:()=>Object(u.jsx)(p,{})}];let v=e.columns;return e.useDrag&&(v=g.concat(v)),Object(u.jsx)(a.a,{...e,rowSelection:e.rowSelection,rowKey:e.rowKey,loading:r,size:e.size,columns:v,dataSource:t,pagination:!1,components:{body:{wrapper:e=>Object(u.jsx)(O,{useDragHandle:!0,disableAutoscroll:!0,helperClass:"row-dragging",onSortEnd:f,...e}),row:s=>{let{className:a,style:n,...r}=s;const o=t.findIndex((t=>t[e.rowKey]===r["data-row-key"]));return Object(u.jsx)(h,{index:o,...r})}}}})})))),((e,t)=>{var s,a;return e.columns===t.columns&&(null===(s=e.rowSelection)||void 0===s?void 0:s.selectedRowKeys.length)===(null===(a=t.rowSelection)||void 0===a?void 0:a.selectedRowKeys.length)&&e.tableData===t.tableData&&e.updateTrick===t.updateTrick}))},1028:function(e,t,s){"use strict";var a=s(0),n=s(298),r=s(40),o=s(66),i=s(1004),c=s(67),l=s(1026),d=s(5);class m extends a.Component{constructor(){super(...arguments),this.setSelectedRowKeys=e=>{this.props.setSelectedRowKeys(e,this.props.name)}}componentDidMount(){}render(){var e;const t=Object(c.a)(null===(e=this.props.tableData[this.props.name])||void 0===e?void 0:e.selectedRowKeys,[]);let s={selectedRowKeys:t,onChange:e=>{this.setSelectedRowKeys(e)},selections:[{key:"all",text:this.props.t("selectedAll"),onSelect:e=>{let s=e;s=s.concat(t.filter((t=>!e.includes(t)))),this.setSelectedRowKeys(s)}},{key:"clear",text:this.props.t("clear"),onSelect:e=>{let s=t.filter((t=>!e.includes(t)));this.setSelectedRowKeys(s)}},{key:"invert",text:this.props.t("invert"),onSelect:e=>{let s=e.filter((e=>!t.includes(e)));s=s.concat(t.filter((t=>!e.includes(t)))),this.setSelectedRowKeys(s)}}]};return Object(d.jsxs)(d.Fragment,{children:[this.props.uesAlldata&&Object(d.jsx)(l.a,{...this.props,rowSelection:this.props.disableSelection?void 0:s}),!0!==this.props.uesAlldata&&Object(d.jsx)(i.a,{...this.props,rowSelection:this.props.disableSelection?void 0:s})]})}}t.a=Object(o.b)((e=>({tableData:e.TableReduce.tableData})),(e=>({setSelectedRowKeys:(t,s)=>e({type:"setSelectedRowKeys",data:t,name:s})})))(Object(n.a)()(Object(r.e)(m)))},1031:function(e,t,s){"use strict";var a=s(298),n=s(40),r=s(0),o=s(60),i=s(968),c=s(1019),l=s(5);t.a=Object(a.a)()(Object(n.e)((e=>{const[t,s]=Object(r.useState)(!1);return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(o.a,{...e.btnProps,onClick:()=>{s(!0)},children:e.btnText}),Object(l.jsx)(i.a,{width:1250,visible:t,footer:!1,onCancel:()=>{s(!1)},children:Object(l.jsx)(c.a,{...e})})]})})))},1099:function(e,t,s){"use strict";var a=s(3),n=s(15),r=s(0),o=s(303),i=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s},c=function(e,t){var s=e.ellipsis,n=e.rel,c=i(e,["ellipsis","rel"]),l=r.useRef(null);r.useImperativeHandle(t,(function(){return l.current}));var d=Object(a.a)(Object(a.a)({},c),{rel:void 0===n&&"_blank"===c.target?"noopener noreferrer":n});return delete d.navigate,r.createElement(o.a,Object(a.a)({},d,{ref:l,ellipsis:!!s,component:"a"}))},l=r.forwardRef(c),d=function(e,t){return r.createElement(o.a,Object(a.a)({ref:t},e,{component:"div"}))},m=r.forwardRef(d),u=s(27),b=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s},j=function(e,t){var s=e.ellipsis,i=b(e,["ellipsis"]),c=r.useMemo((function(){return s&&"object"===Object(n.a)(s)?Object(u.a)(s,["expandable","rows"]):s}),[s]);return r.createElement(o.a,Object(a.a)({ref:t},i,{ellipsis:c,component:"span"}))},p=r.forwardRef(j),h=s(83),O=s(316).a;O.Text=p,O.Link=l,O.Title=h.a,O.Paragraph=m;t.a=O},1314:function(e,t,s){},1357:function(e,t,s){"use strict";var a=s(1),n=s(0),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M824.2 699.9a301.55 301.55 0 00-86.4-60.4C783.1 602.8 812 546.8 812 484c0-110.8-92.4-201.7-203.2-200-109.1 1.7-197 90.6-197 200 0 62.8 29 118.8 74.2 155.5a300.95 300.95 0 00-86.4 60.4C345 754.6 314 826.8 312 903.8a8 8 0 008 8.2h56c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5A226.62 226.62 0 01612 684c60.9 0 118.2 23.7 161.3 66.8C814.5 792 838 846.3 840 904.3c.1 4.3 3.7 7.7 8 7.7h56a8 8 0 008-8.2c-2-77-33-149.2-87.8-203.9zM612 612c-34.2 0-66.4-13.3-90.5-37.5a126.86 126.86 0 01-37.5-91.8c.3-32.8 13.4-64.5 36.3-88 24-24.6 56.1-38.3 90.4-38.7 33.9-.3 66.8 12.9 91 36.6 24.8 24.3 38.4 56.8 38.4 91.4 0 34.2-13.3 66.3-37.5 90.5A127.3 127.3 0 01612 612zM361.5 510.4c-.9-8.7-1.4-17.5-1.4-26.4 0-15.9 1.5-31.4 4.3-46.5.7-3.6-1.2-7.3-4.5-8.8-13.6-6.1-26.1-14.5-36.9-25.1a127.54 127.54 0 01-38.7-95.4c.9-32.1 13.8-62.6 36.3-85.6 24.7-25.3 57.9-39.1 93.2-38.7 31.9.3 62.7 12.6 86 34.4 7.9 7.4 14.7 15.6 20.4 24.4 2 3.1 5.9 4.4 9.3 3.2 17.6-6.1 36.2-10.4 55.3-12.4 5.6-.6 8.8-6.6 6.3-11.6-32.5-64.3-98.9-108.7-175.7-109.9-110.9-1.7-203.3 89.2-203.3 199.9 0 62.8 28.9 118.8 74.2 155.5-31.8 14.7-61.1 35-86.5 60.4-54.8 54.7-85.8 126.9-87.8 204a8 8 0 008 8.2h56.1c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5 29.4-29.4 65.4-49.8 104.7-59.7 3.9-1 6.5-4.7 6-8.7z"}}]},name:"team",theme:"outlined"},o=s(12),i=function(e,t){return n.createElement(o.a,Object(a.a)(Object(a.a)({},e),{},{ref:t,icon:r}))};i.displayName="TeamOutlined";t.a=n.forwardRef(i)},1396:function(e,t,s){"use strict";s.r(t);var a,n,r=s(298),o=s(40),i=s(972),c=s(973),l=s(968),d=s(974),m=s(965),u=s(1099),b=s(0),j=s(66),p=s(100),h=(s(1314),s(243));function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}function f({title:e,titleId:t,...s},r){return b.createElement("svg",O({t:1646560118011,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":1998,width:200,height:200,ref:r,"aria-labelledby":t},s),e?b.createElement("title",{id:t},e):null,a||(a=b.createElement("path",{d:"M877.3632 253.5424h-78.6944V200.192c0-22.0672-17.8688-39.936-39.936-39.936h-482.304c-22.0672 0-39.936 17.8688-39.936 39.936v53.3504H152.1664c-22.0672 0-39.936 17.8688-39.936 39.936v84.0704c0 65.6384 53.248 118.8864 118.8864 118.8864h5.4784c1.9968 142.0288 109.2608 258.56 247.3472 275.0464v89.7536H367.0016a30.8224 30.8224 0 1 0 0 61.6448h295.5264a30.8224 30.8224 0 1 0 0-61.6448h-116.9408v-89.088c140.8-13.9264 251.0336-131.7376 253.0304-275.7632 65.5872-0.1024 118.6816-53.2992 118.6816-118.8864V293.4272c0-22.016-17.8688-39.8848-39.936-39.8848z m-175.1552 213.3504a30.8224 30.8224 0 1 1-61.6448 0v-150.528a30.8224 30.8224 0 1 1 61.6448 0v150.528z",fill:"#FCDFAE","p-id":1999})),n||(n=b.createElement("path",{d:"M877.3632 211.7632h-78.6944V158.4128c0-22.0672-17.8688-39.936-39.936-39.936h-482.304c-22.0672 0-39.936 17.8688-39.936 39.936v53.3504H152.1664c-22.0672 0-39.936 17.8688-39.936 39.936v84.0704c0 65.6384 53.248 118.8864 118.8864 118.8864h5.4784c1.9968 142.0288 109.2608 258.56 247.3472 275.0464v89.7536H367.0016a30.8224 30.8224 0 1 0 0 61.6448h295.5264a30.8224 30.8224 0 1 0 0-61.6448h-116.9408v-89.088c140.8-13.9264 251.0336-131.7376 253.0304-275.7632 65.5872-0.1024 118.6816-53.2992 118.6816-118.8864V251.648c0-22.016-17.8688-39.8848-39.936-39.8848z m-175.1552 213.3504a30.8224 30.8224 0 1 1-61.6448 0v-150.528a30.8224 30.8224 0 1 1 61.6448 0v150.528z",fill:"#F8B62D","p-id":2e3})))}const g=b.forwardRef(f);s.p;var v=s(1),x={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]},name:"file-text",theme:"outlined"},S=s(12),y=function(e,t){return b.createElement(S.a,Object(v.a)(Object(v.a)({},e),{},{ref:t,icon:x}))};y.displayName="FileTextOutlined";var w=b.forwardRef(y),I=s(1357),C=s(983),T=s(1019),k=s(67),N={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M923 283.6a260.04 260.04 0 00-56.9-82.8 264.4 264.4 0 00-84-55.5A265.34 265.34 0 00679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 00-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9z"}}]},name:"heart",theme:"filled"},R=function(e,t){return b.createElement(S.a,Object(v.a)(Object(v.a)({},e),{},{ref:t,icon:N}))};R.displayName="HeartFilled";var z=b.forwardRef(R),A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M923 283.6a260.04 260.04 0 00-56.9-82.8 264.4 264.4 0 00-84-55.5A265.34 265.34 0 00679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 00-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9zM512 814.8S156 586.7 156 385.5C156 283.6 240.3 201 344.3 201c73.1 0 136.5 40.8 167.7 100.4C543.2 241.8 606.6 201 679.7 201c104 0 188.3 82.6 188.3 184.5 0 201.2-356 429.3-356 429.3z"}}]},name:"heart",theme:"outlined"},D=function(e,t){return b.createElement(S.a,Object(v.a)(Object(v.a)({},e),{},{ref:t,icon:A}))};D.displayName="HeartOutlined";var M=b.forwardRef(D),P=s(5);t.default=Object(j.b)((e=>{const t=e.ContestReducer;return{ContestInfo:t.contestInfo,minWidth:t.minWidth,afterContestSubmission:t.afterContestSubmission,allowSliderMove:t.allowSliderMove,sliderTime:t.sliderTime,openSliderMove:t.openSliderMove}}),(e=>({setMinWidth:t=>e({type:"setMinWidth",data:t}),setAllowSliderMove:t=>e({type:"setAllowSliderMove",data:t}),setExportData:t=>e({type:"setExportData",data:t})})))(Object(r.a)()(Object(o.e)((e=>{const t=e.match.params.contestId,s=e.ContestInfo[t],[a,n]=Object(b.useState)(),[r,o]=Object(b.useState)(),j=void 0!==s?Object(h.b)(s.gmtStart,s.gmtEnd):void 0,[O,f]=Object(b.useState)({}),[v,x]=Object(b.useState)(Date.now()),[S,y]=Object(b.useState)(!1),[N,R]=Object(b.useState)(""),[A,D]=Object(b.useState)(""),[F,E]=Object(b.useState)([]);Object(b.useEffect)((()=>{let e=window.localStorage.getItem("contest-like-".concat(t));e=Object(k.c)(e)?[]:JSON.parse(e),E(e)}),[]);const _=e=>{0!==e.length&&window.localStorage.setItem("contest-like-".concat(t),JSON.stringify(e)),E(e)};Object(b.useEffect)((()=>{void 0===a&&p.a.getRank({contestId:t}).then((t=>{t.length>0&&null!==t[0].submission&&e.setAllowSliderMove(!0),t.map(((e,t)=>{null!==e.submissions&&e.submissions.sort(((e,t)=>parseInt(e[1])-parseInt(t[1])))})),n(t)}))}),[a,n,t,j]),Object(b.useEffect)((()=>{if(void 0!==a){if(e.openSliderMove&&Math.abs(Date.now()-v)<=500)return;e.openSliderMove&&x(Date.now());const t=s.problems,n={};n.SumNumber=a.length;for(let e=0;e<t.length;e++)n["submit_".concat(e)]=t[e].submitNum,n["ac_".concat(e)]=t[e].acceptNum,n["user_submit_".concat(e)]=0,n["user_ac_".concat(e)]=0,n["first_ac_".concat(e)]=parseInt(s.gmtEnd)+1;const r=a.map(((a,r)=>{let o=0,i=0,c=0,l={};const d=a.official,m=(e,a)=>{let r,m="",u=0,b="",j=0;0!==e.length&&(u=e[1],o+=e[1]*t[a].problemWeight,m="acm"===s.features.mode?"red":"orange",1===e[2]&&(m="green"),0===e[1]&&(m="red"),n["user_submit_".concat(a)]+=1,j=e[3],1===e[2]?(n["user_ac_".concat(a)]+=1,!0===d&&0!==parseInt(e[0])&&(n["first_ac_".concat(a)]=Math.min(n["first_ac_".concat(a)],parseInt(e[0]))),b="accepted",c+=20*e[3],0!==parseInt(e[0])&&(r=parseInt(e[0])),c+=Object(h.c)(s.gmtStart,r)/60,i+=1):0!==e[4]?(b="pending",j-=e[4]):b="rejected",l["".concat(a+1)]={color:m,score:u,minTime:r,tries:j,pending:e[4],className:b})};if(null===a.submissions)a.problemResults.map(((e,t)=>m(e,t)));else{const t=Math.max(e.sliderTime,parseInt(s.gmtStart));let n={};for(let r=0;r<a.submissions.length;r++){const o=a.submissions[r];if(!e.afterContestSubmission&&parseInt(o[1])>parseInt(s.gmtEnd))break;if(e.openSliderMove&&parseInt(o[1])>t)break;const i=o[0];void 0===n[i]&&(n[i]={time:0,score:-1,result:0,submission:0,submissionBeforeAC:0,pending:0});const c=n[i];(c.score<o[2]||c.score===o[2]&&(c.time>parseInt(o[1])||1!==c.result&&1===o[3]))&&(c.time=parseInt(o[1]),c.score=o[2],c.result=o[3]),o[3]<1&&(c.pending+=1),1!==c.result&&(c.submissionBeforeAC+=1),c.submission+=1}for(const e in n)m([n[e].time.toString(),n[e].score,n[e].result,n[e].submissionBeforeAC+(1===n[e].result?1:0),n[e].pending],parseInt(e)-1)}return{username:a.username,nickname:a.nickname,official:a.official,rank:r+1,sumScore:o,Cell:l,ACNumber:i,penalty:c}}));r.sort(((e,t)=>"acm"===s.features.mode?e.ACNumber===t.ACNumber?e.penalty-t.penalty:t.ACNumber-e.ACNumber:"ioi"===s.features.mode?t.sumScore-e.sumScore:void 0));const i=(e,t)=>"acm"===s.features.mode?e.ACNumber===t.ACNumber&&Math.abs(e.penalty-t.penalty)<1e-6:"ioi"===s.features.mode?e.sumScore===t.sumScore:void 0;let c=1,l=0;const d=r.map(((e,t)=>!1===e.official?{...e,rank:"*"}:(l+=1,0===t?{...e,rank:1}:(i(r[t-1],e)||(c=l),{...e,rank:c}))));f(n),o(d),e.setExportData(d)}}),[a,e.afterContestSubmission,e.sliderTime]);const K=[{title:"\u6392\u540d",dataIndex:"rank",width:80,render:e=>Object(P.jsxs)("span",{className:"center",children:[" ",e," "]})},{title:"\u53c2\u8d5b\u4eba",width:150,render:(e,t)=>{let s=F.includes(t.username);return Object(P.jsxs)("div",{style:{paddingLeft:10,paddingRight:10},children:[Object(P.jsxs)("span",{style:{float:"left",marginTop:10},children:[s&&Object(P.jsx)(z,{style:{color:"red"},onClick:()=>{_(F.filter((e=>e!==t.username)))}}),!s&&Object(P.jsx)(M,{onClick:()=>{_([...F,t.username])}})]}),Object(P.jsxs)("span",{style:{float:"right",textAlign:"right"},children:[Object(P.jsx)("div",{style:{fontWeight:"bold"},children:t.username}),Object(P.jsx)("div",{style:{color:"grey",fontSize:12},children:t.nickname})]})]})}},{title:"\u5206\u6570",width:100,render:(e,t)=>Object(P.jsxs)(P.Fragment,{children:["ioi"===s.features.mode&&Object(P.jsx)("span",{children:t.sumScore}),"acm"===s.features.mode&&Object(P.jsxs)(i.a,{children:[Object(P.jsx)(c.a,{span:12,children:Object(P.jsx)("span",{style:{fontWeight:"bold"},children:t.ACNumber})}),Object(P.jsx)(c.a,{span:11,children:Object(P.jsx)("span",{children:Math.floor(t.penalty)})})]})]})}];let L=330;if(void 0!==s){for(const e of s.problems)K.push({title:Object(P.jsxs)("div",{className:"ProHeader",children:[Object(P.jsxs)("div",{children:[Object(P.jsx)("span",{style:{fontWeight:"bold"},children:String.fromCharCode("A".charCodeAt(0)+parseInt(e.problemCode)-1)}),!Object(k.c)(e.problemColor)&&Object(P.jsx)("span",{style:{paddingLeft:4},children:Object(P.jsx)("span",{className:"circle",style:{backgroundColor:e.problemColor}})})]}),Object(P.jsxs)("div",{style:{color:"grey",fontSize:12},children:[e.acceptNum," / ",e.submitNum]})]}),width:70,render:(t,a)=>{const n=a.Cell[e.problemCode];return void 0===n?Object(P.jsx)(P.Fragment,{}):Object(P.jsxs)("div",{style:{cursor:"pointer"},onClick:()=>{R(a.username),D(e.problemCode),y(!0)},children:["ioi"===s.features.mode&&Object(P.jsx)("span",{style:{fontWeight:"bold",color:n.color},children:n.score}),"acm"===s.features.mode&&Object(P.jsxs)("div",{className:Math.abs(n.minTime-O["first_ac_".concat(e.problemCode-1)])<1e-6?"firstAccept":n.className,children:[void 0!==n.minTime&&Object(P.jsx)("div",{style:{fontSize:16},children:Math.floor(Object(h.c)(s.gmtStart,n.minTime)/60)}),void 0===n.minTime&&Object(P.jsx)("div",{style:{fontSize:16},children:"\xa0\xa0"}),Object(P.jsx)("div",{children:Object(P.jsxs)("span",{children:[0!==n.tries&&Object(P.jsx)("span",{children:n.tries}),0!==n.pending&&Object(P.jsxs)("span",{children:[0!==n.tries&&Object(P.jsx)("span",{children:"+"}),n.pending]}),"\xa0",n.tries+n.pending<=1?"try":"tries"]})})]})]})}}),L+=70;e.minWidth!==L&&e.setMinWidth(L)}let V=[],H=-1;if(void 0!==r){for(let e=0;e<r.length;e++){let t=r[e];F.includes(t.username)&&(V.push(t),H=V.length-1)}V=[...V,...r]}return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(l.a,{width:1250,visible:S,footer:!1,destroyOnClose:!0,onCancel:()=>{y(!1)},children:Object(P.jsx)(T.a,{btnText:"\u8bb0\u5f55-"+N+"-"+A,name:"Contest-Rank-SubmissionList-"+N+"-"+A,API:async e=>p.a.getContestSubmissionList({...e,problemCode:A,username:N,contestId:t}),QuerySubmissionAPI:async e=>p.a.getContestSubmissionInfo({contestId:t,submissionId:e})})}),Object(P.jsx)(d.a,{className:"RankTable",style:{width:L,minWidth:L},pagination:!1,bordered:!0,dataSource:V,rowClassName:(e,t)=>{let s="rowBase";return t===H&&(s+=" rowLikeLast"),F.includes(e.username)&&(s+=" rowLike"),s},columns:K,summary:()=>Object(P.jsx)(d.a.Summary,{children:Object(P.jsxs)(d.a.Summary.Row,{className:"RankSummary",children:[Object(P.jsx)(d.a.Summary.Cell,{index:0,colSpan:2,children:Object(P.jsxs)(m.b,{size:50,children:["\u603b\u7ed3",Object(P.jsxs)("div",{style:{textAlign:"left",fontSize:12},children:[Object(P.jsxs)("div",{children:[Object(P.jsx)(w,{})," \u901a\u8fc7\u6570/\u63d0\u4ea4\u6570"]}),Object(P.jsxs)("div",{children:[Object(P.jsx)(I.a,{})," \u901a\u8fc7\u7528\u6237/\u63d0\u4ea4\u7528\u6237"]}),Object(P.jsxs)("div",{children:[Object(P.jsx)(C.a,{component:g})," \u6700\u65e9\u901a\u8fc7"]})]})]})}),0!==Object.keys(O).length&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)(d.a.Summary.Cell,{index:1,children:[" ",Object(P.jsx)(I.a,{})," ",O.SumNumber]}),s.problems.map((e=>{const t=parseInt(e.problemCode)-1;return Object(P.jsxs)(d.a.Summary.Cell,{index:2+t,className:"RankSummary-Pro",children:[Object(P.jsxs)("div",{children:[Object(P.jsx)(w,{})," ",O["ac_".concat(t)],"/",O["submit_".concat(t)]]}),Object(P.jsxs)("div",{children:[Object(P.jsx)(I.a,{})," ",O["user_ac_".concat(t)],"/",O["user_submit_".concat(t)]]}),Object(P.jsx)("div",{children:parseInt(s.gmtEnd)+1!==O["first_ac_".concat(t)]&&Object(P.jsxs)("div",{children:[Object(P.jsx)(C.a,{component:g}),Object(P.jsx)(u.a.Text,{ellipsis:{tooltip:Object(h.a)(s.gmtStart,O["first_ac_".concat(t)],"d","h","m","s")},style:{width:50},children:Object(h.a)(s.gmtStart,O["first_ac_".concat(t)],"d","h","m","s")})]})})]})}))]})]})})})]})}))))}}]);
//# sourceMappingURL=43.03f84538.chunk.js.map