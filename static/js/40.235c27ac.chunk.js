(this.webpackJsonpsduoj=this.webpackJsonpsduoj||[]).push([[40],{1015:function(e,t,n){"use strict";var a=n(1071),s=n.n(a),c=n(67);const o="https://oj.qd.sdu.edu.cn";var r=n(0),i=n(5);t.a=e=>{const[t,n]=Object(r.useState)(!1),[a,l]=Object(r.useState)(!1);return Object(r.useEffect)((()=>{Object(c.c)(e.text)||t||a===e.text||(n(!0),l(e.text),function(e,t){var n,a,r;(Object(c.c)(e)||Object(c.c)(null===(n=e)||void 0===n?void 0:n.trim()))&&(e=""),e=null===(r=e=null===(a=e)||void 0===a?void 0:a.replaceAll(/`{3}\n([-|0-9a-zA-Z])/g,"```plaintext\n$1"))||void 0===r?void 0:r.replaceAll(/\$\n(.*)\n\$/g,"$ $1 $");const i={mode:"light",cdn:o+"/vditor",emojiPath:o+"/vditor/dist/images/emoji",theme:{path:o+"/vditor/dist/css/content-theme"},hljs:{lineNumber:!1},markdown:{toc:!0,mark:!0,footnotes:!0,autoSpace:!0},math:{inlineDigit:!0,engine:"KaTeX"}};return s.a.preview(document.getElementById(t),e,i)}(e.text,e.id).then((e=>{n(!1)})))}),[e.id,e.text,t]),Object(i.jsx)("div",{id:e.id,style:{overflowY:"hidden"}})}},1069:function(e,t,n){"use strict";var a=n(3),s=n(4),c=n(89),o=n(2),r=n.n(o),i=n(6),l=n(8),d=n(11),j=n(0),b=n(99),h=n(41),m=j.forwardRef((function(e,t){var n,a=e.prefixCls,s=void 0===a?"rc-switch":a,c=e.className,o=e.checked,m=e.defaultChecked,p=e.disabled,u=e.loadingIcon,f=e.checkedChildren,O=e.unCheckedChildren,v=e.onClick,x=e.onChange,g=e.onKeyDown,y=Object(d.a)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),C=Object(b.a)(!1,{value:o,defaultValue:m}),k=Object(l.a)(C,2),w=k[0],S=k[1];function E(e,t){var n=w;return p||(S(n=e),null===x||void 0===x||x(n,t)),n}var I=r()(s,c,(n={},Object(i.a)(n,"".concat(s,"-checked"),w),Object(i.a)(n,"".concat(s,"-disabled"),p),n));return j.createElement("button",Object.assign({},y,{type:"button",role:"switch","aria-checked":w,disabled:p,className:I,ref:t,onKeyDown:function(e){e.which===h.a.LEFT?E(!1,e):e.which===h.a.RIGHT&&E(!0,e),null===g||void 0===g||g(e)},onClick:function(e){var t=E(!w,e);null===v||void 0===v||v(t,e)}}),u,j.createElement("span",{className:"".concat(s,"-inner")},w?f:O))}));m.displayName="Switch";var p=m,u=n(36),f=n(56),O=n(38),v=n(189),x=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(n[a[s]]=e[a[s]])}return n},g=j.forwardRef((function(e,t){var n,o=e.prefixCls,i=e.size,l=e.disabled,d=e.loading,b=e.className,h=void 0===b?"":b,m=x(e,["prefixCls","size","disabled","loading","className"]),g=j.useContext(u.b),y=g.getPrefixCls,C=g.direction,k=j.useContext(O.b),w=j.useContext(f.b),S=l||w||d,E=y("switch",o),I=j.createElement("div",{className:"".concat(E,"-handle")},d&&j.createElement(c.a,{className:"".concat(E,"-loading-icon")})),M=r()((n={},Object(s.a)(n,"".concat(E,"-small"),"small"===(i||k)),Object(s.a)(n,"".concat(E,"-loading"),d),Object(s.a)(n,"".concat(E,"-rtl"),"rtl"===C),n),h);return j.createElement(v.a,{insertExtraNode:!0},j.createElement(p,Object(a.a)({},m,{prefixCls:E,className:M,disabled:S,ref:t,loadingIcon:I})))}));g.__ANT_SWITCH=!0;t.a=g},1095:function(e,t){},1176:function(e,t,n){"use strict";var a=n(0),s=n(60),c=n(97),o=n(1219),r=n.n(o),i=n(5);class l extends a.Component{constructor(){super(...arguments),this.handleExportAll=(e,t,n)=>{const a=t.map((t=>Object.keys(t).reduce(((n,a)=>(n[e[a]||a]=t[a],n)),{}))),s=r.a.utils.json_to_sheet(a);this.openDownloadDialog(this.sheet2blob(s,void 0),n+".xlsx")},this.handleExportAllJson=(e,t)=>{const n=r.a.utils.json_to_sheet(e);this.openDownloadDialog(this.sheet2blob(n,void 0),t+".xlsx")},this.openDownloadDialog=(e,t)=>{"object"===typeof e&&e instanceof Blob&&(e=URL.createObjectURL(e));var n,a=document.createElement("a");a.href=e,a.download=t||"",window.MouseEvent?n=new MouseEvent("click"):(n=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(n)},this.sheet2blob=(e,t)=>{let n={SheetNames:[t=t||"sheet1"],Sheets:{}};n.Sheets[t]=e;let a=r.a.write(n,{bookType:"xlsx",bookSST:!1,type:"binary"});return new Blob([function(e){let t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let a=0;a!==e.length;++a)n[a]=255&e.charCodeAt(a);return t}(a)],{type:"application/octet-stream"})}}render(){return Object(i.jsx)(s.a,{type:this.props.ButtonType,...this.props.ButtonProps,onClick:()=>{if(void 0!==this.props.getJson)this.props.getJson().then((e=>{this.handleExportAllJson(e,this.props.fileName)})).catch((e=>{c.b.error(e)}));else{const e=this.props.nowData(),t=this.props.colMap(e);this.handleExportAll(t,e,this.props.fileName)}},children:this.props.ButtonText})}}t.a=l},1220:function(e,t){},1221:function(e,t){},1303:function(e,t,n){"use strict";var a=n(66),s=n(100),c=n(0);t.a=(e,t)=>{const n=Object(a.d)((t=>t.ContestReducer.contestInfo[e])),o=Object(a.c)(),[r,i]=Object(c.useState)(!1);return Object(c.useEffect)((()=>{!1===t||r||void 0!==n&&!0!==t||(i(!0),s.a.getContestInfo({contestId:e}).then((t=>{o({type:"setContestInfo",key:e,data:t})})).catch((()=>{setTimeout((()=>{i(!1)}),3e3)})))}),[n,t]),!1===t?void 0:n}},1304:function(e,t,n){"use strict";var a=n(0),s=n(243),c=n(5);t.a=e=>{const[t,n]=Object(a.useState)(Date.now());return Object(a.useEffect)((()=>{let e=setInterval((()=>{n(Date.now())}),1e3);return()=>clearInterval(e)})),Object(c.jsxs)(c.Fragment,{children:["before"===e.type&&Object(s.a)(e.time,t),"after"===e.type&&Object(s.a)(t,e.time)]})}},1357:function(e,t,n){"use strict";var a=n(1),s=n(0),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M824.2 699.9a301.55 301.55 0 00-86.4-60.4C783.1 602.8 812 546.8 812 484c0-110.8-92.4-201.7-203.2-200-109.1 1.7-197 90.6-197 200 0 62.8 29 118.8 74.2 155.5a300.95 300.95 0 00-86.4 60.4C345 754.6 314 826.8 312 903.8a8 8 0 008 8.2h56c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5A226.62 226.62 0 01612 684c60.9 0 118.2 23.7 161.3 66.8C814.5 792 838 846.3 840 904.3c.1 4.3 3.7 7.7 8 7.7h56a8 8 0 008-8.2c-2-77-33-149.2-87.8-203.9zM612 612c-34.2 0-66.4-13.3-90.5-37.5a126.86 126.86 0 01-37.5-91.8c.3-32.8 13.4-64.5 36.3-88 24-24.6 56.1-38.3 90.4-38.7 33.9-.3 66.8 12.9 91 36.6 24.8 24.3 38.4 56.8 38.4 91.4 0 34.2-13.3 66.3-37.5 90.5A127.3 127.3 0 01612 612zM361.5 510.4c-.9-8.7-1.4-17.5-1.4-26.4 0-15.9 1.5-31.4 4.3-46.5.7-3.6-1.2-7.3-4.5-8.8-13.6-6.1-26.1-14.5-36.9-25.1a127.54 127.54 0 01-38.7-95.4c.9-32.1 13.8-62.6 36.3-85.6 24.7-25.3 57.9-39.1 93.2-38.7 31.9.3 62.7 12.6 86 34.4 7.9 7.4 14.7 15.6 20.4 24.4 2 3.1 5.9 4.4 9.3 3.2 17.6-6.1 36.2-10.4 55.3-12.4 5.6-.6 8.8-6.6 6.3-11.6-32.5-64.3-98.9-108.7-175.7-109.9-110.9-1.7-203.3 89.2-203.3 199.9 0 62.8 28.9 118.8 74.2 155.5-31.8 14.7-61.1 35-86.5 60.4-54.8 54.7-85.8 126.9-87.8 204a8 8 0 008 8.2h56.1c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5 29.4-29.4 65.4-49.8 104.7-59.7 3.9-1 6.5-4.7 6-8.7z"}}]},name:"team",theme:"outlined"},o=n(12),r=function(e,t){return s.createElement(o.a,Object(a.a)(Object(a.a)({},e),{},{ref:t,icon:c}))};r.displayName="TeamOutlined";t.a=s.forwardRef(r)},1369:function(e,t,n){"use strict";var a=n(1),s=n(0),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM540 701v53c0 4.4-3.6 8-8 8h-40c-4.4 0-8-3.6-8-8v-53a48.01 48.01 0 1156 0zm152-237H332V240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224z"}}]},name:"lock",theme:"filled"},o=n(12),r=function(e,t){return s.createElement(o.a,Object(a.a)(Object(a.a)({},e),{},{ref:t,icon:c}))};r.displayName="LockFilled";t.a=s.forwardRef(r)},1399:function(e,t,n){"use strict";n.r(t);var a=n(298),s=n(40),c=n(976),o=n(975),r=n(1422),i=n(972),l=n(973),d=n(965),j=n(190),b=n(1108),h=n(1069),m=n(0),p=n(1303),u=n(243),f=n(1175),O=n.n(f),v=n(1369),x=n(967),g=n(1357),y=n(66),C=n(67),k=n(1304),w=n(185),S=n(87),E=n(1176);var I=n(1015),M=n(5);var T=Object(y.b)((e=>{var t,n;const a=e.UserReducer,s=e.ContestReducer;return{username:null===(t=a.userInfo)||void 0===t?void 0:t.username,roles:null===(n=a.userInfo)||void 0===n?void 0:n.roles,afterContestSubmission:s.afterContestSubmission,allowSliderMove:s.allowSliderMove,sliderTime:s.sliderTime,openSliderMove:s.openSliderMove,exportData:s.exportData}}),(e=>({setAfterContestSubmission:t=>e({type:"setAfterContestSubmission",data:t}),setSliderTime:t=>e({type:"setSliderTime",data:t}),setOpenSliderMove:t=>e({type:"setOpenSliderMove",data:t})})))(Object(a.a)()(Object(s.e)((e=>{const[t,n]=Object(m.useState)(""),a=e.match.params.contestId,s=e.location.pathname,f=Object(p.a)(a),[y,T]=Object(m.useState)(Date.now()),N=[{name:"Register",link:S.g+"/contest/"+a+"/register",re:/\/contest\/.*\/register/g},{name:"Overview",link:S.g+"/contest/"+a+"/overview",re:/\/contest\/.*\/overview/g},{name:"Problem",link:S.g+"/contest/"+a+"/problem/1",re:/\/contest\/.*\/problem\/.*/g},{name:"Status",link:S.g+"/contest/"+a+"/submission",re:/\/contest\/.*\/submission/g},{name:"Rank",link:S.g+"/contest/"+a+"/rank",re:/\/contest\/.*\/rank/g}],R=void 0!==f?Object(u.b)(f.gmtStart,f.gmtEnd):void 0,D=void 0!==f?-1!==f.participants.indexOf(e.username):void 0,A=void 0!==f?f.features.openness:void 0;return Object(m.useEffect)((()=>{null!==s.match(/\/contest\/[0-9]*\/?$/g)&&void 0!==A&&void 0!==D&&("private"!==A||D?e.history.replace(N[1].link):e.history.replace(N[0].link)),null!==s.match(N[0].re)&&D&&e.history.replace(N[1].link),N.map((e=>{null!==s.match(e.re)&&n(e.name)}))}),[s,A,D]),Object(m.useEffect)((()=>{Math.abs(y-e.sliderTime)>=6e4&&e.setSliderTime(y)}),[y,e.sliderTime]),Object(M.jsxs)(M.Fragment,{children:[void 0!==f&&Object(M.jsxs)(M.Fragment,{children:[!Object(C.c)(f.markdownDescription)&&!Object(C.c)(f.markdownDescription.trim())&&Object(M.jsx)(c.a,{message:Object(M.jsx)(I.a,{id:"contest-markdownDescription",text:null===f||void 0===f?void 0:f.markdownDescription}),type:"info"}),Object(M.jsxs)(o.a,{style:{marginTop:25},children:[Object(M.jsxs)("div",{className:"center",children:[Object(M.jsxs)("span",{style:{float:"left"},children:[Object(M.jsx)("span",{style:{fontWeight:"bold"},children:"\u5f00\u59cb\u65f6\u95f4\uff1a"}),Object(u.e)(f.gmtStart)]}),Object(M.jsxs)("span",{style:{fontWeight:"bold",fontSize:"1.75rem"},children:[Object(M.jsx)("span",{style:{paddingRight:10},children:f.contestTitle}),"private"===f.features.openness&&Object(M.jsx)(v.a,{style:{color:"red"}}),"protected"===f.features.openness&&Object(M.jsx)(v.a,{style:{color:"orange"}})]}),Object(M.jsxs)("span",{style:{float:"right"},children:[Object(M.jsx)("span",{style:{fontWeight:"bold"},children:"\u7ed3\u675f\u65f6\u95f4\uff1a"}),Object(u.e)(f.gmtEnd)]})]}),"wait"!==R&&Object(M.jsx)(r.a,{style:{marginTop:25},tipFormatter:null,min:parseInt(f.gmtStart),max:parseInt(f.gmtEnd),value:e.openSliderMove?y:Math.max(Math.min(Date.now(),parseInt(f.gmtEnd)),parseInt(f.gmtStart)),onChange:e.openSliderMove?T:void 0}),Object(M.jsx)("div",{style:{marginTop:15},className:"center",children:Object(M.jsxs)(i.a,{children:[Object(M.jsx)(l.a,{span:8,children:"running"===R&&Object(M.jsxs)("span",{style:{float:"left"},children:[Object(M.jsx)("span",{style:{fontWeight:"bold"},children:"\u5df2\u7528\u65f6\u95f4\uff1a"}),Object(M.jsx)(k.a,{type:"before",time:f.gmtStart})]})}),Object(M.jsxs)(l.a,{span:8,children:["wait"===R&&Object(M.jsx)("span",{style:{color:"blue"},children:Object(M.jsxs)(d.b,{children:["\u8ddd\u79bb\u5f00\u59cb\u8fd8\u6709\uff1a",Object(M.jsx)(O.a,{className:"contestHeaderTimer",value:parseInt(f.gmtStart),format:"H \u65f6 m \u5206 s \u79d2"})]})}),"running"===R&&Object(M.jsx)("span",{style:{color:"red"},children:"\u8fdb\u884c\u4e2d"}),"end"===R&&Object(M.jsx)("span",{style:{color:"green"},children:"\u5df2\u7ed3\u675f"})]}),Object(M.jsx)(l.a,{span:8,children:"running"===R&&Object(M.jsxs)("span",{style:{float:"right"},children:[Object(M.jsx)("span",{style:{fontWeight:"bold"},children:"\u5269\u4f59\u65f6\u95f4\uff1a"}),Object(M.jsx)(k.a,{type:"after",time:f.gmtEnd})]})})]})})]})]}),Object(M.jsxs)(i.a,{style:{backgroundColor:"white",border:"1px solid #dcdee2"},children:[Object(M.jsx)(l.a,{span:10,children:Object(M.jsx)(j.a,{mode:"horizontal",theme:"light",style:{border:0},selectedKeys:[t],children:N.map((t=>{if(("wait"!==R||"Register"===t.name)&&(!D||"Register"!==t.name)&&("private"!==A||!1!==D||"Register"===t.name))return Object(M.jsx)(j.a.Item,{onClick:()=>{n(t.name),e.history.push(t.link)},children:e.t(t.name)},t.name)}))})}),Object(M.jsx)(l.a,{span:14,children:void 0!==f&&Object(M.jsxs)(d.b,{size:10,style:{marginTop:"12px",marginRight:"30px",marginBottom:"12px",float:"right",color:"grey"},children:[e.openSliderMove&&Object(M.jsxs)(M.Fragment,{children:[Object(u.a)(f.gmtStart,y),Object(M.jsx)(b.a,{type:"vertical"})]}),!0===e.allowSliderMove&&"Rank"===t&&Object(M.jsxs)(M.Fragment,{children:["\u5386\u53f2\u56de\u653e",Object(M.jsx)(h.a,{checked:e.openSliderMove,onChange:e.setOpenSliderMove,checkedChildren:"\u542f\u7528",unCheckedChildren:"\u5173\u95ed"}),Object(M.jsx)(b.a,{type:"vertical"})]}),Object(w.a)(e.roles,["admin","superadmin"])&&"end"===R&&"Rank"===t&&Object(M.jsxs)(M.Fragment,{children:["\u8d5b\u540e\u63d0\u4ea4",Object(M.jsx)(h.a,{checked:e.afterContestSubmission,onChange:e.setAfterContestSubmission,checkedChildren:"\u663e\u793a",unCheckedChildren:"\u4e0d\u663e\u793a"}),Object(M.jsx)(b.a,{type:"vertical"})]}),Object(w.a)(e.roles,["admin","superadmin"])&&"Rank"===t&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(E.a,{ButtonProps:{size:"small"},ButtonText:"\u5bfc\u51fa",ButtonType:"link",getJson:()=>async function(e){let t=[];for(const n of e)if(!0===n.official){let e={"\u6392\u540d":n.rank,"\u59d3\u540d":n.nickname,"\u5b66\u53f7":n.username,"\u603b\u5206":n.sumScore,"\u8fc7\u9898\u6570":n.ACNumber,"\u7f5a\u65f6":n.penalty};for(const t in n.Cell)e["\u9898\u76ee"+t+"-\u5206\u6570"]=n.Cell[t].score,e["\u9898\u76ee"+t+"-\u63d0\u4ea4\u6b21\u6570"]=n.Cell[t].tries,e["\u9898\u76ee"+t+"-\u901a\u8fc7\u60c5\u51b5"]=n.Cell[t].className;t.push(e)}return Promise.resolve(t)}(e.exportData),fileName:f.contestTitle+"_"+Date.now()+"_\u7ed3\u679c\u5bfc\u51fa"}),Object(M.jsx)(b.a,{type:"vertical"})]}),"acm"===f.features.mode&&Object(M.jsx)("span",{style:{backgroundColor:"#3676b6",color:"#fff",padding:"0 10px",borderRadius:".75rem"},children:"ACM"}),"ioi"===f.features.mode&&Object(M.jsx)("span",{style:{backgroundColor:"#ea517f",color:"#fff",padding:"0 10px",borderRadius:".75rem"},children:"IOI"}),"oi"===f.features.mode&&Object(M.jsx)("span",{style:{backgroundColor:"#f8df72",color:"#fff",padding:"0 10px",borderRadius:".75rem"},children:"OI"}),Object(M.jsx)(b.a,{type:"vertical"}),Object(M.jsxs)("span",{children:[Object(M.jsx)(x.a,{})," ",Object(u.a)(f.gmtStart,f.gmtEnd)]}),Object(M.jsx)(b.a,{type:"vertical"}),Object(M.jsxs)("span",{children:[Object(M.jsx)(g.a,{})," ",f.participantNum]})]})})]})]})})))),N=n(1274),R=n(322),D=n(1082);t.default=Object(y.b)((e=>{const t=e.ContestReducer;return{ContestInfo:t.contestInfo,minWidth:t.minWidth}}),(e=>({})))(Object(a.a)()(Object(s.e)((e=>{var t;const n=e.match.params.contestId,a=e.ContestInfo[n],c=void 0!==a?Object(u.b)(a.gmtStart,a.gmtEnd):void 0;let o=500;const[r,i]=Object(m.useState)(null===(t=document.querySelector("body"))||void 0===t?void 0:t.clientWidth);Object(m.useEffect)((()=>(window.addEventListener("resize",l),()=>{window.removeEventListener("resize",l)})));const l=e=>{i(e.target.innerWidth)};var d;null!==e.location.pathname.match(/\/contest\/.*\/rank/g)&&(o=Math.max(500,(null!==(d=e.minWidth)&&void 0!==d?d:0)+100));return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(D.a,{jump:!0}),Object(M.jsx)("div",{style:o<=1500?{textAlign:"center",margin:"0 auto"}:void 0,children:Object(M.jsxs)("div",{style:o<=1500?{textAlign:"left",maxWidth:"1500px",margin:"0 auto"}:{textAlign:"left",maxWidth:"1500px",marginLeft:Math.max(0,(r-o)/2)},children:[Object(M.jsx)(T,{}),void 0!==a&&"wait"!==c&&Object(M.jsx)("div",{style:{marginTop:25},children:Object(M.jsx)(m.Suspense,{fallback:Object(M.jsx)(R.a,{}),children:N.b.map((e=>Object(M.jsx)(s.a,{path:e.path,exact:e.exact,component:e.component},e.id)))})})]})})]})}))))}}]);
//# sourceMappingURL=40.235c27ac.chunk.js.map